(function(a){with(a){
a.NC=function(b){if(A&&!Fb(9)){var c=m;try{c=b.parentNode}catch(d){}return!!c}return sc(b.ownerDocument.body,b)},a.OC=function(b,c){return b.aa.m(c?b.nH:b.IC)};qq.prototype.Mf=Z(63,function(){var b=this.Nq.body.createTextRange();b.moveToElementText(this.Nq.body);return this.og(new qq(b,this.Nq),j)});Aq.prototype.Mf=Z(62,function(){return(!this.ta||NC(this.ta))&&(!this.pa||NC(this.pa))&&(!(A&&!Fb(9))||Eq(this).Mf())});
Gq.prototype.Mf=Z(61,function(){var b=m;try{b=z.every(this.Ch(),function(b){return A?!!b.parentNode:sc(b.ownerDocument.body,b)})}catch(c){}return b});Mq.prototype.Mf=Z(60,function(){return z.every(bq(this),function(b){return b.Mf()})});iq.prototype.aj=Z(55,function(){return 3!=this.ba.nodeType?-1:this.ba==this.ta?this.Aa:0});Kq.prototype.aj=Z(54,s(0));Oq.prototype.aj=Z(53,function(){return this.Nf[this.Mk].aj()});
lq.prototype.Nd=Z(46,function(){var b=Sb(this.P.startContainer).v("div");b.appendChild(this.P.cloneContents());b=b.innerHTML;if(Ea(b,"<")||!this.isCollapsed()&&!Xa(b,"<"))return b;var c=this.qc(),c=1==c.nodeType?c:c.parentNode;return Us(c.cloneNode(m)).replace(">",">"+b)});qq.prototype.Nd=Z(45,function(){return this.P.htmlText});Aq.prototype.Nd=Z(44,function(){return Eq(this).Nd()});Gq.prototype.Nd=Z(43,function(){return this.xg()});Mq.prototype.Nd=Z(42,function(){return z.map(bq(this),function(b){return b.Nd()}).join("")});
iq.prototype.Zi=Z(41,function(){return 3!=this.ba.nodeType?-1:this.ba==this.pa?this.xa:this.ba.nodeValue.length});Kq.prototype.Zi=Z(40,s(0));Oq.prototype.Zi=Z(39,function(){return this.Nf[this.Mk].Zi()});$p.prototype.Wf=Z(38,function(b){this.isCollapsed()||this.Sc();return this.insertNode(b,j)});Gq.prototype.Wf=Z(37,function(b){b=this.insertNode(b,j);this.isCollapsed()||this.Sc();return b});
Xp.prototype.restore=Z(35,function(b){this.tg&&Yp.log(be,"Disposed SavedRange objects cannot be restored.",i);var c=this.Tj();b||this.G();return c});Fq.prototype.Tj=Z(34,function(){return Dq(this.gB,this.xJ,this.YC,this.AL)});Lq.prototype.Tj=Z(33,function(){for(var b=(this.Ua.length?Rb(this.Ua[0]):document).body.createControlRange(),c=0,d=this.Ua.length;c<d;c++)b.addElement(this.Ua[c]);return Hq(b)});
Pq.prototype.Tj=Z(32,function(){var b=z.map(this.hz,function(b){return b.restore()}),c=new Mq;c.Vl=b;c.Ke=z.map(b,function(b){return b.Kd()});return c});jq.prototype.xg=Z(25,function(){var b=new Ss;P.forEach(this,function(c,d,e){3==c.nodeType?b.append(Wa(c.nodeValue.substring(e.aj(),e.Zi()))):1==c.nodeType&&(-1==e.Zb?gc(c)&&b.append("</"+c.tagName+">"):(d=c.cloneNode(m),d=Us(d),A&&"LI"==c.tagName?b.append(d):(c=d.lastIndexOf("<"),b.append(c?d.substr(0,c):d))))},this);return b.toString()});
Aq.prototype.xg=Z(24,function(){return Eq(this).xg()});Gq.prototype.xg=Z(23,function(){return z.map(Jq(this),Us).join("")});Mq.prototype.xg=Z(22,function(){return this.Nd()});ep.prototype.ci=Z(20,function(b,c){var d=b.ud(),e=this.L()+"-collapse-left",g=this.L()+"-collapse-right";b.Ui(d?g:e,!!(c&1));b.Ui(d?e:g,!!(c&2))});pp.prototype.ci=Z(19,function(b){this.M.ci(this,b)});Zp.prototype.Wo=Z(16,function(){var b=this.Ic?-1:1;this.Zb==b&&(this.Zb=-1*b,this.depth+=this.Zb*(this.Ic?-1:1))});
iq.prototype.Wo=Z(15,function(){iq.n.Wo.apply(this);sc(this.ba,this.pa)&&f(P.Ya)});Id.prototype.setInterval=Z(11,function(b){this.Eg=b;this.ma&&this.enabled?(this.stop(),this.start()):this.ma&&this.stop()});co.prototype.pw=Z(10,function(){return this.m().innerHTML});hq.prototype.Xg=Z(9,function(b,c){this.insertNode(b,j);this.insertNode(c,m)});
lq.prototype.Xg=Z(8,function(b,c){var d=ac(Rb(this.U()));if(d=Rq(d))var e=d.U(),g=d.fa(),h=d.sa(),l=d.Ha();var n=this.P.cloneRange(),q=this.P.cloneRange();n.collapse(m);q.collapse(j);n.insertNode(c);q.insertNode(b);n.detach();q.detach();if(d){if(3==e.nodeType)for(;h>e.length;){h-=e.length;do e=e.nextSibling;while(e==b||e==c)}if(3==g.nodeType)for(;l>g.length;){l-=g.length;do g=g.nextSibling;while(g==b||g==c)}Dq(e,h,g,l).select()}});
qq.prototype.Xg=Z(7,function(b,c){var d=this.P.duplicate(),e=this.P.duplicate();wq(d,b,j);wq(e,c,m);this.ie()});Aq.prototype.Xg=Z(6,function(b,c){Eq(this).Xg(b,c);this.ie()});lq.prototype.Sc=Z(5,function(){var b=this.P;b.extractContents();if(b.startContainer.hasChildNodes()&&(b=b.startContainer.childNodes[b.startOffset])){var c=b.previousSibling;""==Gc(b)&&M(b);c&&""==Gc(c)&&M(c)}});
qq.prototype.Sc=Z(4,function(){if(!this.isCollapsed()&&this.P.htmlText){var b=this.U(),c=this.fa(),d=this.P.text,e=this.P.duplicate();e.moveStart("character",1);e.moveStart("character",-1);e.text==d&&(this.P=e);this.P.text="";this.ie();d=this.U();e=this.sa();try{var g=b.nextSibling;b==c&&(b.parentNode&&3==b.nodeType&&g&&3==g.nodeType)&&(b.nodeValue+=g.nodeValue,M(g),this.P=sq(d),this.P.move("character",e),this.ie())}catch(h){}}});Aq.prototype.Sc=Z(3,function(){Eq(this).Sc();this.ie()});
Gq.prototype.Sc=Z(2,function(){if(this.P){for(var b=[],c=0,d=this.P.length;c<d;c++)b.push(this.P.item(c));z.forEach(b,M);this.collapse(m)}});Mq.prototype.Sc=Z(1,function(){z.forEach(bq(this),function(b){b.Sc()})});
a.PC=function(b,c){var d=c.ed();b.jd[d]&&b.Ib.log(be,"Cannot register the same class of plugin twice.",i);b.jd[d]=c;for(var e in Dv)c[Dv[e]]&&b.mj[e].push(c);c.C=b;b.Od()&&c.enable(b)},a.QC=function(b){return b.C&&b.C.gb},a.RC=function(b){var c=b.ba.parentNode;return new Ps(c,z.indexOf(c.childNodes,b.ba))},a.SC=function(b,c,d,e){return Dq(b,c,d,e)},a.TC=function(b){N.call(this);this.nH=db();this.IC=db();this.aa=Sb(b.Ba());b.Xg(this.aa.v("SPAN",{id:this.nH}),this.aa.v("SPAN",{id:this.IC}))};y(TC,Xp);
TC.prototype.xo=function(b){M(OC(this,j));M(OC(this,m));return b};TC.prototype.Tj=function(){var b=k,c=OC(this,j),d=OC(this,m);if(c&&d){var b=c.parentNode,c=z.indexOf(b.childNodes,c),e=d.parentNode,d=z.indexOf(e.childNodes,d);e==b&&(d-=1);b=Dq(b,c,e,d);b=this.xo(b);b.select()}else this.xo();return b};TC.prototype.w=function(){this.xo();this.aa=k};
a.UC=function(b){var c;if(3==b.ba.nodeType)for(c=b.ba.previousSibling;c&&3==c.nodeType;c=c.previousSibling)b.offset+=Qs(c);else c=b.ba.previousSibling;var d=b.ba.parentNode;b.ba=c?c.nextSibling:d.firstChild;return b},a.VC=function(b,c){return c?Rs(b.U(),b.sa()):Rs(b.fa(),b.Ha())},a.WC=function(b){for(var c=k,d=b.firstChild;d;){var e=d.nextSibling;3==d.nodeType?""==d.nodeValue?b.removeChild(d):c?(c.nodeValue+=d.nodeValue,b.removeChild(d)):c=d:(WC(d),c=k);d=e}},a.XC=function(b){var c=b&&b.nodeName.toLowerCase();
return!(!b||"block"!=(1!=b.nodeType?k:A?Xf(b,"display"):Wf(b,"display"))&&!("td"==c||"table"==c||"li"==c))},a.YC=function(b){return Hc(b,XC,j)},a.ZC=function(b,c){if(c){var d,e=UC(VC(c,j)),g=RC(e),h=e.ba.previousSibling;3==e.ba.nodeType&&(e.ba=k);var l=UC(VC(c,m)),n=RC(l),q=l.ba.previousSibling;3==l.ba.nodeType&&(l.ba=k);d=function(){!e.ba&&h&&(e.ba=h.nextSibling,e.ba||(e=new Ps(h,Qs(h))));!l.ba&&q&&(l.ba=q.nextSibling,l.ba||(l=new Ps(q,Qs(q))));return Dq(e.ba||g.ba.firstChild||g.ba,e.offset,l.ba||
n.ba.firstChild||n.ba,l.offset)};var r=YC(c.Bb())}r?(r=wc(r,b),A?WC(r):r.normalize()):b&&(A?WC(b):b.normalize());return d?d():k},a.$C=function(b,c,d){Ht.call(this,c,b||Py.O(),d)};y($C,Ht);a.aD=function(b){return b.getAttribute&&"true"==b.getAttribute("g_editable")},a.bD=function(b){TC.call(this,b)};y(bD,TC);bD.prototype.xo=function(b){var c=OC(this,j),d=OC(this,m),c=c&&d?wc(c,d):c||d;bD.n.xo.call(this);if(b)return ZC(c,b);c&&(b=Rq(ac(Rb(c))),(b=ZC(c,b))&&b.select())};
a.cD=function(b,c,d){for(var e=(c=1==c)?b.U():b.fa(),g=c?b.sa():b.Ha(),h=b.Bb();e!=h&&e!=d&&!(c&&0!=g||!c&&g!=Qs(e));)var l=e.parentNode,e=z.indexOf(l.childNodes,e),g=c?e:e+1,e=l;return SC(c?e:b.U(),c?g:b.sa(),c?b.fa():e,c?b.Ha():g)},a.dD=function(b){ug(b,m);if($q)for(var c=b,b=b.parentNode;b&&"HTML"!=b.tagName;){if(tg?"none"==b.style[tg].toLowerCase():(A||rb)&&"on"==b.getAttribute("unselectable")){ug(b,m,j);for(var d=0,e=b.childNodes.length;d<e;d++){var g=b.childNodes[d];g!=c&&1==g.nodeType&&ug(b.childNodes[d],
j)}}c=b;b=b.parentNode}},a.eD=function(b){var c=b.target.tagName;"TEXTAREA"!=c&&"INPUT"!=c&&b.preventDefault()},a.fD=void 0,a.gD=function(b){var c=b.Bb();return b.U()!=c.parentElement&&aD(c)||!!Hc(c,aD)},a.hD=function(b,c){var d=cD(b,1,c),d=cD(d,0,c),e=d.U(),g=d.fa(),h=d.sa(),d=d.Ha();if(e==g){for(;g!=c&&0==h&&d==Qs(g);)e=g.parentNode,h=z.indexOf(e.childNodes,g),d=h+1,g=e;e=g}return Dq(e,h,g,d)},a.iD=function(b,c){$q&&c.e(b,"mousedown",eD,j);ug(b,j);for(var d=b.getElementsByTagName("INPUT"),e=0,g=
d.length;e<g;e++){var h=d[e];h.type in sr&&dD(h)}z.forEach(b.getElementsByTagName("TEXTAREA"),dD)},a.jD=function(b){return!!qr[b.tagName]},a.kD=function(b){return it(P.filter(new gt(b),ht))},a.lD=void 0,a.mD=function(b){var c=arguments,d=c.length;return function(){for(var b=0;b<d;b++)if(!c[b].apply(this,arguments))return m;return j}},a.nD=function(b){this.uf=b;this.kO=j;this.Rv=[]},a.oD=function(b){b.ov||(b.ov=Gc(b.uf));return b.ov};a.pD=function(){Cv.call(this)};y(pD,Cv);pD.prototype.ed=s("BTF");pD.prototype.Ib=ke("goog.editor.plugins.BasicTextFormatter");
a.qD={AI:"+link",wU:"+formatBlock",JU:"+indent",jV:"+outdent",MV:"+strikeThrough",FU:"+insertHorizontalRule",NV:"+subscript",OV:"+superscript",ZV:"+underline",ZT:"+bold",LU:"+italic",uU:"+fontSize",tU:"+fontName",sU:"+foreColor",TT:"+backColor",hV:"+insertOrderedList",cW:"+insertUnorderedList",MU:"+justifyCenter",NU:"+justifyFull",PU:"+justifyRight",OU:"+justifyLeft"},a.rD=H.rm(qD);t=pD.prototype;t.we=function(b){return b in rD};t.ne=function(){return ew(this.C)};a.sD=function(b){return QC(b).Ba()};
t.Ve=function(b,c){var d,e,g,h,l,n=c;switch(b){case "+backColor":if(n!==k)if(fr){e=n;g=ew(this.C);var q,r;g&&g.isCollapsed()&&(q=QC(this).createTextNode(B?" ":""),n=g.U(),r=1==n.nodeType?n:n.parentNode,""==r.innerHTML?(r.style.textIndent="-10000px",r.appendChild(q)):(r=QC(this).v("span",{style:"text-indent:-10000px"},q),g.Wf(r)),fq(q).select());tD(this,"hiliteColor",e,m,j);q&&(B&&(q.data=""),r.style.textIndent="")}else rb?tD(this,"hiliteColor",n):tD(this,b,n);break;case "+link":a:{l=n;this.C.bf||
QC(this).Oa().focus();g=(e=this.ne())&&e.Bb();if((g=Ic(g,"A"))&&Hc(g,aD))nc(g);else{g=k;var w=[];if((n=e&&e.Bb())&&"IMG"==n.tagName)l=k;else{if(e&&e.isCollapsed())e=e.oe(0).Kd(),Xq?(g=QC(this).createElement("A"),e.insertNode(g)):Wq&&(e.pasteHTML("<a id='newLink'></a>"),g=QC(this).m("newLink"),g.removeAttribute("id"));else{var F=db();tD(this,"CreateLink",F);z.forEach(this.C.m().getElementsByTagName("A"),function(b){Fa(b.href,F)&&w.push(b)});w.length&&(g=w.pop())}e=g;g=new nD(e);g.uf.href="/";l&&(e.target=
l);w&&(g.Rv=w);l=g}if(l){if(!this.C.execCommand("link",l))if(h=this.C.zk.prompt(Rz,"http://"))if(e=l,g=oD(l)||h,n=e.uf,n.href=h,q=oD(e),g!=q&&(h=qt(n),3==h.nodeType&&(h=h.parentNode),Gc(h)!=q&&(h=n),ic(h),n=Sb(h),h.appendChild(n.createTextNode(g)),e.ov=k),e.kO=m,e=l.uf,jr){g=e.nextSibling;if(!g||!(3==g.nodeType&&(Ea(g.data," ")||Ea(g.data," "))))g=Sb(e).createTextNode(" "),kc(g,e);Tq(g,1).select()}else Xs(e,m);else{e=fq(l.uf);e=new bD(e);nc(l.uf);for(l.uf=k;l.Rv.length;)nc(l.Rv.pop());e.restore().select();
l=k;break a}break a}}l=k}break;case "+justifyCenter":case "+justifyFull":case "+justifyRight":case "+justifyLeft":tD(this,b,k,m,j);B&&tD(this,b,k,m,j);(!dr||!B)&&P.forEach(ew(this.C),uD);break;default:A&&("+formatBlock"==b&&n)&&(n="<"+n+">");if("+foreColor"==b&&n===k)break;switch(b){case "+indent":case "+outdent":dr&&(B&&(e=j),rb&&(e="+outdent"==b?!sD(this).queryCommandEnabled("outdent"):j));case "+insertOrderedList":case "+insertUnorderedList":if(q=mr)q=sD(this),q=vD(this,j,q,b,i);if(q)g="P"!=this.C.queryCommandValue("+defaultTag");
else if(!nr&&(A||rb)){d=this.ne();q=d.Bb();var I=sD(this);wD.lastIndex=0;wD.test(q.innerHTML)&&(d=d.U()&&d.fa()?new TC(d):k,"P"==q.tagName?xD(q,j):(q.innerHTML=q.innerHTML.replace(wD,'<p$1 trtempbr="temp_br">'),q=z.toArray(q.getElementsByTagName("P")),P.forEach(q,function(b){if("temp_br"==b.getAttribute("trtempbr")){b.removeAttribute("trtempbr");if(ft(Fc(b))){var c=A?I.createTextNode(" "):I.createElement("BR");b.appendChild(c)}xD(b)}})),d.restore())}B&&(lr&&!this.queryCommandValue(b))&&(q=this.C.queryCommandValue("+defaultTag"),
"P"==q||"DIV"==q?q=m:(q=this.ne(),q.isCollapsed()&&3!=q.qc().nodeType?(d=QC(this).createTextNode(" "),q.insertNode(d,m),fq(d).select(),q=j):q=m),h|=q);case "+formatBlock":d=!!this.C.Fh("Bidi");break;case "+subscript":case "+superscript":kr&&!this.queryCommandValue(b)&&(q="+subscript"==b?"+superscript":"+subscript",r=yD(q),this.queryCommandValue(q)||sD(this).execCommand(r,m,k),sD(this).execCommand(r,m,k));break;case "+underline":case "+bold":case "+italic":e=B&&dr&&this.queryCommandValue(b);break;
case "+foreColor":case "+fontName":e=dr&&B}tD(this,b,n,d,!!e);h&&sD(this).execCommand("Delete",m,j);g&&sD(this).execCommand("FormatBlock",m,"<div>")}B&&!this.C.Bg&&QC(this).Oa().focus();return l};
t.queryCommandValue=function(b){var c;switch(b){case "+link":return b=(b=this.ne())&&b.Bb(),b=Ic(b,"A"),!!b&&!!Hc(b,aD);case "+justifyCenter":case "+justifyFull":case "+justifyRight":case "+justifyLeft":return zD(this,b);case "+formatBlock":var b=ew(this.C),d=k;P.forEach(b,function(b,c,e){-1!=e.Zb&&(b=YC(b).tagName,d=d||b,d!=b&&(d=k,f(P.Ya)),e.Wo())});return d;case "+indent":case "+outdent":case "+insertHorizontalRule":return m;case "+fontSize":case "+fontName":case "+foreColor":case "+backColor":return this.Qs(sD(this),
b,dr&&B);case "+underline":case "+bold":case "+italic":c=dr&&B;default:var e=sD(this);return vD(this,j,e,b,c)}};t.rG=function(b){br&&b.match(/^\s*<script/i)&&(b="&nbsp;"+b);cr&&(b=b.replace(/<(\/?)strong([^\w])/gi,"<$1b$2"),b=b.replace(/<(\/?)em([^\w])/gi,"<$1i$2"));return b};
t.mK=function(b){for(var b=b.getElementsByTagName("IMG"),c=0,d;d=b[c];c++)if(A){d.removeAttribute("tabIndex");d.removeAttribute("tabIndexSet");var e=d;"removeAttribute"in e&&e.removeAttribute(sa);try{delete e[sa]}catch(g){}d.fP&&(d.tabIndex=d.fP)}};t.nK=function(b){if(C){for(var c=Tb(this.C.gb.Ga,"HEAD",i,i),d=[],e=c.length,g=1;g<e;++g)for(var h=c[g].getElementsByTagName("STYLE"),l=h.length,n=0;n<l;++n)d.push(h[n].outerHTML);return d.join("")+b}return b};
t.tr=function(b,c,d){if(!d)return m;var e;switch(c){case "b":e="+bold";break;case "i":e="+italic";break;case "u":e="+underline";break;case "s":return j}return e?(this.C.execCommand(e),j):m};
a.wD=A?/<br([^\/>]*)\/?>/gi:/<br([^\/>]*)\/?>(?!<\/(div|p)>)/gi,a.xD=function(b,c){if(A||rb){var d=b.outerHTML.replace(/<(\/?)p/gi,"<$1div");c&&(d=d.replace(wD,"</div><div$1>"));rb&&!/<\/div>$/i.test(d)&&(d+="</div>");b.outerHTML=d}},a.yD=function(b){return 0==b.indexOf("+")?b.substring(1):b},a.uD=function(b){b=YC(b);b.align&&(b.style.textAlign=b.align,b.removeAttribute("align"))},a.tD=function(b,c,d,e,g){var h=k;e&&(h=b.C.queryCommandValue("rtl")?"rtl":b.C.queryCommandValue("ltr")?"ltr":k);var c=
yD(c),l,n;if(A){var q=c;n=[];var e=k,r=b.ne();l=QC(b);if(q in AD){var w=r&&r.Bb();if(w){for(var F=Ub("BLOCKQUOTE",k,w),I,G=0;G<F.length;G++)if(r.containsNode(F[G])){I=F[G];break}if(w=I||Ic(w,"BLOCKQUOTE"))e=l.v("div",{style:"height:0"}),w.appendChild(e),n.push(e),I?r=Dq(I,0,e,0):r.containsNode(e)&&(r=SC(r.U(),r.sa(),e,0)),r.select()}}I=b.C;!I.lc()&&!e&&q in BD&&(I=I.m(),r&&(r.isCollapsed()&&!qc(I))&&(e=r.oe(0).Kd(),r=e.duplicate(),r.moveToElementText(I),r.collapse(m),r.isEqual(e)&&(r=l.createTextNode(" "),
I.appendChild(r),e.move("character",1),e.move("character",-1),e.select(),n.push(r))),e=l.v("div",{style:"height:0"}),I.appendChild(e),n.push(e));l=n[0];n=n[1]}if(C){l=c;var Q;CD[l]&&(Q=QC(b).v("div",{style:"height: 0"},"x"),b.C.m().appendChild(Q));DD[l]&&(l=b.C.m(),Q=QC(b).v("div",{style:"height: 0"},"x"),l.insertBefore(Q,l.firstChild));l=Q}if(B&&(Q=c,D("1.9")&&"formatblock"==Q.toLowerCase()&&(Q=b.ne(),I=Q.U(),Q.isCollapsed()&&(I&&"BODY"==I.tagName)&&(e=Q.sa(),(I=I.childNodes[e])&&"BR"==I.tagName))))Q=
Q.Kd(),Q.setStart(I,0),Q.setEnd(I,0);if(or&&"fontsize"==c.toLowerCase()){var W=hD(ew(b.C),b.C.m());P.forEach(P.filter(W,function(b,c,d){return 1==d.Zb&&W.containsNode(b)}),function(b){Uf(b,"font-size","");B&&(0==b.style.length&&b.getAttribute("style")!=k)&&b.removeAttribute("style")})}Q=sD(b);if(g&&dr&&(Q.execCommand("styleWithCSS",m,j),rb)){I=[];e=ew(b.C).Bb();do I.push(e);while(e=e.parentNode);I=P.cK(P.Xc(ew(b.C)),P.Xc(I));I=P.filter(I,XC);P.forEach(I,function(b){var c=b.style.outline;b.style.outline=
"0px solid red";b.style.outline=c})}Q.execCommand(c,m,d);g&&dr&&Q.execCommand("styleWithCSS",m,m);C&&(!D("526")&&"formatblock"==c.toLowerCase()&&d&&/^[<]?h\d[>]?$/i.test(d))&&P.forEach(b.ne(),function(b){"Apple-style-span"==b.className&&(b.style.fontSize="",b.style.fontWeight="")});if(/insert(un)?orderedlist/i.test(c)){if(C){var ja=m;P.forEach(b.ne(),function(b){var c=b.tagName;if("UL"==c||"OL"==c)if(ja){if(c=rc(b)){var d=b.ownerDocument.createRange();d.setStartAfter(c);d.setEndBefore(b);if(Ha(d.toString())&&
c.nodeName==b.nodeName){for(;c.lastChild;)b.insertBefore(c.lastChild,b.firstChild);c.parentNode.removeChild(c)}}}else ja=j})}if(A){for(c=(c=b.ne())&&c.qc();c&&"UL"!=c.tagName&&"OL"!=c.tagName;)c=c.parentNode;c&&(c=c.parentNode);c&&(d=z.toArray(c.getElementsByTagName("UL")),z.extend(d,z.toArray(c.getElementsByTagName("OL"))),z.forEach(d,function(b){var c=b.type;if(c&&!("UL"==b.tagName?ED:FD)[c])b.type=""}));n&&M(n)}}l&&M(l);h&&b.C.execCommand(h)},a.BD={indent:1,outdent:1,insertOrderedList:1,insertUnorderedList:1,
justifyCenter:1,justifyFull:1,justifyRight:1,justifyLeft:1,ltr:1,rtl:1},a.AD={insertOrderedList:1,insertUnorderedList:1},a.FD={1:1,a:1,A:1,i:1,I:1},a.ED={disc:1,circle:1,square:1},a.CD={justifyCenter:1,justifyFull:1,justifyRight:1,justifyLeft:1,formatBlock:1},a.DD={insertOrderedList:1,insertUnorderedList:1},a.GD={center:1,justify:1,right:1,left:1},a.zD=function(b,c){var d=c.replace("+justify","").toLowerCase();"full"==d&&(d="justify");var e=b.C.Fh("Bidi");if(e)return d==e.dX();var g=b.ne();if(!g)return m;
for(var h=g.Bb(),e=z.filter(h.childNodes,function(b){return ht(b)&&g.containsNode(b,j)}),e=e.length?e:[h],h=0;h<e.length;h++){var l=YC(e[h]),n=d,q=Yf(l,"textAlign"),q=q.replace(/^-(moz|webkit)-/,"");GD[q]||(q=l.align||"left");if(n!=q)return m}return j};pD.prototype.Qs=function(b,c,d){return vD(this,m,b,c,d)};a.vD=function(b,c,d,e,g){e=yD(e);if(g){var h=sD(b);h.execCommand("styleWithCSS",m,j)}b=c?d.queryCommandState(e):d.queryCommandValue(e);g&&h.execCommand("styleWithCSS",m,m);return b};a.HD=function(b,c){N.call(this);this.As=[];for(this.ws=[];b&&"BODY"!=b.nodeName&&b!=c;){for(var d=0,e=b.previousSibling;e;)e=e.previousSibling,++d;this.As.unshift(d);this.ws.unshift(b.nodeName);b=b.parentNode}};y(HD,N);HD.prototype.toString=function(){for(var b=[],c,d=0;c=this.ws[d];d++)b.push(this.As[d]+","+c);return b.join("\n")};a.ID=function(b,c){for(var d,e=c,g=0;d=b.ws[g];++g)if(e=e.childNodes[b.As[g]],!e||e.nodeName!=d)return k;return e};HD.prototype.w=function(){delete this.As;delete this.ws};ke("goog.editor.plugins.Blockquote");a.JD=function(){Cv.call(this)};y(JD,Cv);t=JD.prototype;t.Zg="DIV";t.ed=s("EnterHandler");t.enable=function(b){JD.n.enable.call(this,b);pr&&("P"==this.Zg||"DIV"==this.Zg)&&QC(this).Ba().execCommand("opera-defaultBlock",m,this.Zg)};t.rG=function(b){return!b||ft(b)?br?this.QL():"":b};t.QL=lf("<br>");
t.GM=function(b){if(B&&this.C.Bg)return m;if(8==b.keyCode){var c=ew(this.C),d=this.C.m(),c=c&&c.U();d.firstChild==c&&At(c)&&(b.preventDefault(),b.stopPropagation())}else if(13==b.keyCode)if(B){if(!b.shiftKey){var d=ew(this.C),c=!d||d.isCollapsed(),e=Xq?KD(this):MD(this),g=this.C.execCommand("+splitBlockquote",e);g&&(b.preventDefault(),b.stopPropagation());Xq||e.removeNode(j);g||this.xM(b,c,d)}}else{this.C.uh();d=Xq?KD(this):MD(this);if(c=!!this.C.execCommand("+splitBlockquote",d))b.preventDefault(),
b.stopPropagation();Xq||d.removeNode(j);C&&this.yM(b);if(A||rb)ND(this);else if(!c&&C){if(c=d=ew(this.C))a:{for(c=d.Bb();c;c=c.parentNode)if(jD(c)){c="BLOCKQUOTE"==c.tagName;break a}c=m}if(c){c=QC(this);e=c.createElement("BR");d.insertNode(e,j);if(d=jD(e.parentNode)){for(d=e.nextSibling;d&&3==d.nodeType&&!d.nodeValue;)d=d.nextSibling;d=!d}d&&jc(c.createElement("BR"),e);Xs(e,m);b.preventDefault()}}this.C.Re()}else if(B&&46==b.keyCode&&(c=ew(this.C),c.isCollapsed()&&(d=c.fa(),1==d.nodeType&&(c=d.childNodes[c.Ha()])&&
"BR"==c.tagName)))e=it(P.filter(new gt(c,m,j),ht)),g=c.nextSibling,d.removeChild(c),b.preventDefault(),g&&jD(g)&&(e&&!("BR"==e.tagName||jD(e))?Tq(e,Qs(e)).select():(b=qt(g),Tq(b,0).select()));return m};t.sr=function(b){if(B&&this.C.Bg)return m;(A||rb)&&13==b.keyCode&&ND(this,j);return m};t.yM=ha;t.xM=ha;
a.OD=H.sh("LI","DIV","H1","H2","H3","H4","H5","H6"),a.ND=function(b,c){for(var d=ew(b.C),e=d.qc(),g=b.C.m(),h;e&&e!=g;){var l=e.nodeName;if("DIV"==l||OD[l]&&(!c||!(At(e)&&1==e.getElementsByTagName("BR").length))){if(rb&&h){"DIV"==l&&(h==e.lastChild&&At(h))&&(kc(h,e),fq(h).select());break}return}rb&&(c&&"P"==l&&"DIV"!=l)&&(h=e);e=e.parentNode}if(A&&!D(9)){var n=m,d=d.Kd(),e=d.duplicate();e.moveEnd("character",1);if(e.text.length&&(n=e.parentElement(),e=e.duplicate(),e.collapse(m),e=e.parentElement(),
n=n!=e&&e!=d.parentElement()))d.move("character",-1),d.select()}b.C.gb.Ba().execCommand("FormatBlock",m,"<DIV>");n&&(d.move("character",1),d.select())},a.MD=function(b){var b=QC(b).Ba(),c=b.selection.createRange(),d=db();c.pasteHTML('<span id="'+d+'"></span>');b=b.getElementById(d);b.id="";return b},a.KD=function(b){b=ew(b.C);if(!b.isCollapsed()){var c=j;if(rb){var d=b.U(),e=b.sa();d==b.fa()&&(d.lastChild&&"BR"==d.lastChild.tagName&&e==d.childNodes.length-1)&&(c=m)}if(c){var g=b;if(g&&!g.isCollapsed()){var h=
j,c=g.Bb(),d=new HD(g.U(),c),e=g.sa(),l;l=g;var n=l.U();XC(n)&&(n=n.childNodes[l.sa()]||n);var n=YC(n),q=l.fa();XC(q)&&(q=q.childNodes[l.Ha()]||q);q=YC(q);l=n==q;if(n=!l)a:{var q=g,n=q.fa(),q=q.Ha(),r=n;if(XC(r)){var w=r.childNodes[q];if(!w||1==w.nodeType&&XC(w)){n=m;break a}}for(w=YC(r);w!=r;){if(kD(r)){n=j;break a}r=r.parentNode}n=q!=Qs(n)}g.Sc();(g=ID(d,c))?g=Tq(g,e):(g=Tq(c,c.childNodes.length),h=m);g.select();l&&(l=YC(g.U()),At(l,j)&&(h="&nbsp;",rb&&"LI"==l.tagName&&(h="<br>"),l.innerHTML=h,
zt(l.firstChild),h=m));n&&(g=YC(g.U()),l=kD(g),g&&l&&(hc(g,l.childNodes),M(l)));h&&(g=Tq(ID(d,c),e),g.select())}}}return VC(b,j)};a.PD=function(){},a.QD=new PD,a.RD=["click",B?"keypress":"keydown"];PD.prototype.e=function(b,c,d,e,g){function h(b){if("click"==b.type&&nd(b))c.call(e,b);else if(13==b.keyCode||3==b.keyCode)b.type="keypress",c.call(e,b)}h.yj=c;h.ft=e;g?g.e(b,RD,h):O(b,RD,h)};PD.prototype.Da=function(b,c,d,e,g){for(var h=0;d=RD[h];h++){var l;l=yd(b,d,m)||[];for(var n,q=0;n=l[q];q++)if(n.Of.yj==c&&n.Of.ft==e){g?g.Da(b,d,n.Of):xd(b,d,n.Of);break}}};a.TD=function(b){N.call(this);this.mk=b||window;this.ns=O(this.mk,"resize",this.Ow,m,this);this.ic=Yb(this.mk);if(C&&lb||rb&&this.mk.self!=this.mk.top)this.Tt=window.setInterval(v(this.GB,this),SD)};y(TD,Gd);a.SD=500;t=TD.prototype;t.ns=k;t.mk=k;t.ic=k;t.Tt=k;t.pl=function(){return this.ic?this.ic.clone():k};t.w=function(){TD.n.w.call(this);this.ns&&(zd(this.ns),this.ns=k);this.Tt&&(window.clearInterval(this.Tt),this.Tt=k);this.ic=this.mk=k};t.Ow=function(){this.GB()};
t.GB=function(){var b=Yb(this.mk);Pb(b,this.ic)||(this.ic=b,this.dispatchEvent("resize"))};a.VD=function(b,c){N.call(this);this.aa=Sb(b);this.N=new le(this);this.tA=new TD(this.aa.Oa());this.hd={};this.od=this.aa.v("DIV",{className:UD});R(this.od,m);b.appendChild(this.od);Uf(this.od,"zIndex",c);this.Nm=this.od;this.rK=this.aa.v("DIV",{className:"tr_bubble_closebox",innerHTML:"&nbsp;"});this.Nm.appendChild(this.rK);iD(this.od,this.N);this.Xh=new Rh(this.od)};y(VD,Gd);a.UD="tr_bubble";t=VD.prototype;t.Ib=ke("goog.ui.editor.Bubble");
t.w=function(){VD.n.w.call(this);M(this.od);this.od=k;this.N.G();this.N=k;this.tA.G();this.tA=k};t.X=p("Nm");t.Bb=p("od");t.oN=function(){this.R()&&this.ha()};t.WM=function(){for(var b in this.hd)M(this.hd[b].element);this.hd={};E.remove(this.od,"tr_multi_bubble");this.N.removeAll();this.dispatchEvent("hide")};t.R=function(){return this.Xh.R()};a.WD=A?4:2,a.XD=new Pf(WD,0,WD,0);
VD.prototype.ha=function(){var b=k,c=j,d;for(d in this.hd)var e=this.hd[d],b=e.Wz,c=c&&e.WQ;d=496;b=fg(this.od)!=fg(b);c&&(d=YD(this,b?7:5,4,9));d&496&&(d=YD(this,b?6:4,5,9));d&496&&(d=YD(this,b?7:5,4,5),d&496&&this.Ib.jk("reposition(): positionAtAnchor() failed with "+d))};
a.YD=function(b,c,d,e){var g=k,h;for(h in b.hd){var l=b.hd[h].Wz;if(!g||sc(l,g))g=b.hd[h].Wz}return Pm(g,c,b.od,d,k,XD,e)},a.ZD=function(b,c,d,e,g,h){this.type=d;this.Wz=g;this.WQ=h;this.element=b.v("DIV",{className:"tr_bubble_panel",id:c},b.v("DIV",{className:"tr_bubble_panel_title"},e+":"),b.v("DIV",{className:"tr_bubble_panel_content"}))};ZD.prototype.X=function(){return this.element.lastChild};a.$D=function(){Cv.call(this);this.dc=new le(this)};y($D,Cv);a.aE=function(b,c){return new VD(b,c)},a.bE={};t=$D.prototype;t.Jj=k;t.Cx=m;t.ed=lf("AbstractBubblePlugin");t.sr=function(){this.R()&&this.gj();return m};
t.gj=function(b,c){var d;if(b)d=b.target;else if(c)d=c;else{var e=ew(this.C);if(e){var g=e.U(),h=e.fa(),l=e.sa(),n=e.Ha();A&&(e.isCollapsed()&&g!=h)&&(e=Tq(g,l));1==g.nodeType&&(g==h&&l==n-1)&&(g=g.childNodes[l],1==g.nodeType&&(d=g))}d=d||e&&e.Bb()}var q;a:{if(d&&(l=this.NL(d))){if(l!=this.Dt||!this.Jj){cE(this);this.Qg&&at(this.Qg);d=dE(this);var r=this.iw();if(!H.some(d.hd,function(b){return b.type==r})){this.Dt=l;var g=this.iw(),n=this.hD(),h=v(this.HK,this),w=this.jS(),e=db(),l=new ZD(d.aa,e,
g,n,l,!w);d.hd[e]=l;n=0;for(w=d.Nm.childNodes.length-1;n<w;n++){var F=d.Nm.childNodes[n];if(d.hd[F.id].type>g){q=F;break}}jc(l.element,q||d.Nm.lastChild);h(l.X());iD(l.element,d.N);q=H.Ra(d.hd);1==q?(d.N.e(d.tA,"resize",d.oN).e(d.Xh,"hide",d.WM),d.Xh.D(j),d.ha()):2==q&&E.add(d.od,"tr_multi_bubble");d.ha();this.Jj=e;this.dc.e(d,"hide",this.HD);this.Vh();this.Cx&&this.dc.e(d.X(),"keydown",this.pP);this.dc.e(d.X(),"mouseover",function(){this.Qg&&this.Qg.stop()},this)}}else this.Qg&&this.Qg.stop();q=
m;break a}cE(this);q=m}return q};t.disable=function(b){if(b.zj==Pv){var c=bE[b.id];c&&(c.G(),delete bE[b.id])}};a.dE=function(b){var c=b.rW||b.C.zk.document.body;b.aa=Sb(c);var d=bE[b.C.id];d||(d=aE.call(k,c,b.C.TJ||0),bE[b.C.id]=d);return d};t.iw=s("");t.hD=s("");t.jS=mf;
a.cE=function(b){if(b.Jj&&(!b.Qg||!b.Qg.Wb()))b.Qg=new xj(function(){if(this.Jj){var b=dE(this),d=this.Jj;M(b.hd[d].element);delete b.hd[d];d=H.Ra(b.hd);1>=d&&E.remove(b.od,"tr_multi_bubble");0==d?b.Xh.D(m):b.ha();this.HD()}},250,b),b.Qg.start()};t.Vh=ha;t.HD=function(){this.Jj=this.Dt=k;this.dc.removeAll()};t.Lw=function(b){if(this.Cx&&this.R()&&9==b.keyCode&&!b.shiftKey){var c=dE(this).X();if(c=K("tr_bubble_link",c))return c.focus(),b.preventDefault(),j}return m};
t.pP=function(b){if(this.R()&&9==b.keyCode){var c=dE(this).X(),c=Vb("tr_bubble_link",c);if(b.shiftKey?c[0]==b.target:c.length&&c[c.length-1]==b.target)this.C.focus(),b.preventDefault()}};t.R=function(){return!!this.Jj};t.ha=function(){var b=dE(this);b&&b.ha()};
t.Cq=function(b,c,d,e,g){c=this.aa.v("SPAN",{className:"tr_bubble_link"},g?this.aa.v("I",{className:g},c):c);this.Cx&&c.setAttribute("tabindex",0);c.setAttribute("role","link");e?e.appendChild(c):(e=this.aa.m(b))&&mc(c,e);c.id=b;iD(c,this.dc);d&&(b=this.dc,QD.e(c,d,i,b.da||b,b));return c};x("Go to link: ");x("Change");x("Remove");a.eE=function(b){N.call(this);this.ad=b};y(eE,Gd);eE.prototype.show=function(){this.Qe||(this.Qe=this.hv(),this.Qe.addEventListener(fi,this.ZL,m,this));this.Qe.D(j)};eE.prototype.hide=function(){this.Qe&&this.Qe.D(m)};eE.prototype.nb=function(){return!!this.Qe&&this.Qe.R()};a.fE=function(b){this.Xk=b;this.ti=new Wh("",j,this.Xk.ad);this.Qm=new di(this.Xk.ad);this.Pm={};this.ih("tr-dialog")};fE.prototype.Ma=function(b){this.ti.Ma(b);return this};
a.gE=function(b,c){var d=x("OK");b.Qm.set("ok",c||d,j);b.Pm.ok=v(b.Xk.TM,b.Xk)},a.hE=function(b){var c=ki,d=x("取消");b.Qm.set(c,d,m,j);b.Pm[c]=v(b.Xk.zw,b.Xk);return b};fE.prototype.be=function(b,c,d){d=d||db();this.Qm.set(d,b);this.Pm[d]=c;return this};fE.prototype.ih=function(b){E.add(Zh(this.ti),b);return this};fE.prototype.Ea=function(b){this.ti.X().appendChild(b);return this};
a.iE=function(b){b.Qm.Eb()&&(gE(b),hE(b));hi(b.ti,b.Qm);var c=b.Pm;b.Pm=k;b.ti.addEventListener(ii,function(b){if(c[b.key])return c[b.key](b)});bi(b.ti,j);var d=b.ti;b.ti=k;return d};t=eE.prototype;t.jw=function(b){return this.Qe.mc.cd(b)};t.TM=function(b){return(b=this.Xm(b))?this.dispatchEvent(b):m};t.zw=function(){return this.dispatchEvent("cancel")};t.w=function(){this.Qe&&(this.hide(),this.Qe.G(),this.Qe=k);eE.n.w.call(this)};t.ZL=function(){this.dispatchEvent("afterhide")};a.jE=function(b){Cv.call(this);this.zK=b};y(jE,Cv);t=jE.prototype;t.we=function(b){return b==this.zK};t.execCommand=function(b,c){return this.Ve.apply(this,arguments)};t.lw=p("mb");t.Ve=function(b,c){this.QG||kE(this);this.mb||(this.mb=this.gv(Sb(this.C.zk),c));var d=ew(this.C);this.gz=d&&new bD(d);Ct(this.C.gb.Oa());wd(this.mb,"afterhide",this.tn,m,this);this.C.Bg=j;this.mb.show();this.dispatchEvent("dialogOpened");Gv(this.C);return j};
t.tn=function(){this.C.Bg=m;lE(this);this.QG||kE(this);this.dispatchEvent("dialogClosed");Gv(this.C);this.C.Hq.selectionchange=za()};a.lE=function(b){b.gz&&(b.gz.restore(),b.gz=k);b.C.focus()};t.w=function(){kE(this);jE.n.w.call(this)};t.QG=m;t.rx=m;a.kE=function(b){b.mb&&!b.rx&&(b.rx=j,b.mb.G(),b.mb=k,b.rx=m)};a.mE=function(){};y(mE,$o);ia(mE);t=mE.prototype;t.L=s("goog-tab");t.pc=function(){return Vc.QA};t.v=function(b){var c=mE.n.v.call(this,b);(b=b.Jf())&&this.Kc(c,b);return c};t.o=function(b,c){var c=mE.n.o.call(this,b,c),d=this.Jf(c);d&&b.ot(d);if(b.$&8&&(d=b.getParent())&&qa(d.jm))b.Yb(8,m),d.jm(b);return c};t.Jf=function(b){return b.title||""};t.Kc=function(b,c){b&&(b.title=c||"")};a.nE=function(b,c,d){ip.call(this,b,c||mE.O(),d);lp(this,8,j);this.Zj|=9};y(nE,ip);nE.prototype.Jf=p("ip");nE.prototype.Kc=function(b){this.M.Kc(this.m(),b);this.ot(b)};nE.prototype.ot=ca("ip");gp("goog-tab",function(){return new nE(k)});a.oE=function(){};y(oE,Gp);ia(oE);oE.prototype.L=s("goog-tab-bar");oE.prototype.pc=function(){return Vc.RI};oE.prototype.sz=function(b,c,d){this.cF||(this.rq||pE(this),this.cF=H.rm(this.rq));var e=this.cF[c];e?(b.No(e==qE||e==rE?Jp:Ip),b.dF=e):oE.n.sz.call(this,b,c,d)};oE.prototype.Ye=function(b){var c=oE.n.Ye.call(this,b);this.rq||pE(this);c.push(this.rq[b.dF]);return c};a.pE=function(b){var c=b.L();b.rq=H.create(sE,c+"-top",tE,c+"-bottom",qE,c+"-start",rE,c+"-end")};a.vE=function(b,c,d){b=b||sE;this.No(b==qE||b==rE?Jp:Ip);this.dF=b;Ht.call(this,this.vb,c||oE.O(),d);uE(this)};y(vE,Ht);a.sE="top",a.tE="bottom",a.qE="start",a.rE="end";t=vE.prototype;t.MJ=j;t.hf=k;t.B=function(){vE.n.B.call(this);uE(this)};t.w=function(){vE.n.w.call(this);this.hf=k};t.removeChild=function(b,c){wE(this,b);return vE.n.removeChild.call(this,b,c)};t.oz=function(b){vE.n.oz.call(this,b);this.MJ&&this.jm(Qh(this,b))};t.jm=function(b){b?b.im(j):this.hf&&this.hf.im(m)};
a.wE=function(b,c){if(c&&c==b.hf){for(var d=dt(b,c),e=d-1;c=Qh(b,e);e--)if(c.R()&&c.isEnabled()){b.jm(c);return}for(d+=1;c=Qh(b,d);d++)if(c.R()&&c.isEnabled()){b.jm(c);return}b.jm(k)}};t.fN=function(b){this.hf&&this.hf!=b.target&&this.hf.im(m);this.hf=b.target};t.gN=function(b){b.target==this.hf&&(this.hf=k)};t.dN=function(b){wE(this,b.target)};t.eN=function(b){wE(this,b.target)};t.pe=function(){Kt(this)||this.ld(this.hf||Qh(this,0))};
a.uE=function(b){b.h().e(b,"select",b.fN).e(b,"unselect",b.gN).e(b,"disable",b.dN).e(b,"hide",b.eN)};gp("goog-tab-bar",function(){return new vE});a.xE=function(){Cv.call(this)};y(xE,Cv);xE.prototype.tr=function(b){if(B&&this.C.Bg)b=m;else if(9==b.keyCode&&!b.metaKey&&!b.ctrlKey){var c=ew(this.C);Ic(c.Bb(),"LI")||P.some(c,function(b){return"LI"==b.tagName})?(this.C.execCommand(b.shiftKey?"+outdent":"+indent"),b.preventDefault(),b=j):b=m}else b=m;return b};a.yE=function(){Cv.call(this)};y(yE,xE);yE.prototype.ed=s("ListTabHandler");a.zE=function(b){Cv.call(this);this.SO=b};y(zE,Cv);t=zE.prototype;t.ed=lf("LoremIpsum");t.Np=nf;t.tp=m;t.queryCommandValue=function(b){return"usinglorem"==b&&this.tp};
t.execCommand=function(b,c){if("clearlorem"==b){var d=!!c,e=this.C;if(this.tp&&!e.Bg){var g=e.m();g||(g=e.Hc);this.tp=m;g.style.fontStyle=this.eP;e.yd(j,k,j);d&&e.Od()&&(C?(Rb(e.m()).body.focus(),e.Hf()):rb&&jw(e))}}else"updatelorem"==b&&(d=this.C,!this.tp&&(!d.Bg&&Rv!=d.id)&&((e=d.m())||(e=d.Hc),At(e)&&(this.tp=j,this.eP=e.style.fontStyle,e.style.fontStyle="italic",d.yd(j,this.SO,j))))};t.we=function(b){return"clearlorem"==b||"updatelorem"==b||"usinglorem"==b};a.AE=function(b){this.mB=b};y(AE,Gd);a.BE=function(){N.call(this);this.OO=100;this.zd=[];this.Pj=[];this.Is=[]};y(BE,Gd);t=BE.prototype;t.Jr=k;t.hA=function(){CE(this,this.zd,this.Pj)};t.Vy=function(){CE(this,this.Pj,this.zd)};a.CE=function(b,c,d){if(c.length){var e=c.pop();d.push(e);b.Is.push({type:c==b.zd?"before_undo":"before_redo",eD:c==b.zd?e.hA:e.Vy,state:e});1==b.Is.length&&b.ug();(0==c.length||1==d.length)&&b.dispatchEvent("state_change")}};
t.ug=function(){if(!(this.Jr||0==this.Is.length)){var b=this.Is.shift();this.dispatchEvent({type:b.type,state:b.state})&&(b.state.mB?(this.Jr=O(b.state,"action_completed",this.uL,m,this),b.eD.call(b.state)):(b.eD.call(b.state),this.ug()))}};t.uL=function(){zd(this.Jr);this.Jr=k;this.ug()};a.DE=function(b){Cv.call(this);b=b||new BE;this.fF&&zd(this.fF);this.Ud=b;this.fF=O(this.Ud,"state_change",this.dL,m,this);this.Wi={};this.$m={};this.oE=k;this.WJ=v(this.GR,this)};y(DE,Cv);DE.prototype.Ib=ke("goog.editor.plugins.UndoRedo");DE.prototype.Bn=k;a.EE=H.rm({aW:"+undo",tV:"+redo"});t=DE.prototype;t.we=function(b){return b in EE};t.OH=function(b){this.disable(b);this.C=k};
t.enable=function(b){if(!this.isEnabled(b)){fw(b);var c=new le(this);B||c.e(b,"beforechange",this.aM);c.e(b,Lv,this.iM);c.e(b,"blur",this.yw);this.Wi[b.Ag]=c;FE(this,b)}};t.disable=function(b){fw(b);var c=this.Wi[b.Ag];c&&(c.G(),delete this.Wi[b.Ag]);this.$m[b.Ag]&&delete this.$m[b.Ag]};t.isEnabled=function(b){return!!this.Wi[b.Ag]};t.w=function(){DE.n.w.call(this);for(var b in this.Wi)this.Wi[b].G(),delete this.Wi[b];this.C=k;this.Ud&&(this.Ud.G(),delete this.Ud)};t.ed=s("UndoRedo");
t.execCommand=function(b){"+undo"==b?this.Ud.hA():"+redo"==b&&this.Ud.Vy()};t.queryCommandValue=function(b){var c=k;"+undo"==b?c=0<this.Ud.zd.length:"+redo"==b&&(c=0<this.Ud.Pj.length);return c};t.dL=function(){this.C.dispatchEvent({type:"cvc",AK:["+redo","+undo"]})};
t.GR=function(b,c,d){var e=this.C;if(e){Fv(e,j,j);try{e.uh();e.execCommand("clearlorem",j);e.m().innerHTML=c;d&&d.select();var g=this.C;e.focus();g&&g.Ag!=b.kn&&g.execCommand("updatelorem");var h=this.$m[b.kn];h.oi=c;h.MH=d}catch(l){this.Ib.log(be,"Error while restoring undo state",l)}finally{this.Bn=b,e.Re(),Gv(e)}}};
t.tr=function(b,c,d){if(d){var e;"z"==c?e=b.shiftKey?"+redo":"+undo":"y"==c&&(e="+redo");if(e)return(b="+undo"==e?this.Ud.zd[this.Ud.zd.length-1]:this.Ud.Pj[this.Ud.Pj.length-1])&&b.kn?this.C.execCommand(e):this.execCommand(e),j}return m};t.aM=function(b){if(!this.Bn){var b=b.target,c=b.Ag;this.oE!=c&&(this.oE=c,FE(this,b))}};t.iM=function(b){this.Bn?(b=this.Bn,this.Bn=k,b.dispatchEvent("action_completed")):FE(this,b.target)};t.yw=function(b){(b=b.target)&&fw(b)};
a.FE=function(b,c){var d=c.Ag,e,g;c.queryCommandValue("usinglorem")?(e="",g=k):(e=c.m().innerHTML,g=new GE(c),g=!g.isValid()?k:g);var h=b.$m[d];if(h){if(h.oi==e)return;if(""==e||""==h.oi){var l=c.Ss(8,"",{});if(e==l&&""==h.oi||h.oi==l&&""==e)return}h.Wy=e;h.gR=g;l=b.Ud;if(0==l.zd.length||!h.equals(l.zd[l.zd.length-1])){l.zd.push(h);l.zd.length>l.OO&&l.zd.shift();var n=l.Pj.length;l.Pj.length=0;l.dispatchEvent({type:"state_added",state:h});(1==l.zd.length||n)&&l.dispatchEvent("state_change")}}b.$m[d]=
new HE(d,e,g,b.WJ)},a.HE=function(b,c,d,e){this.mB=j;this.kn=b;this.NG=e;this.oi=c;this.MH=d};y(HE,AE);HE.prototype.hA=function(){this.NG(this,this.oi,this.MH)};HE.prototype.Vy=function(){this.NG(this,this.Wy,this.gR)};HE.prototype.equals=function(b){return this.kn==b.kn&&this.oi==b.oi&&this.Wy==b.Wy};
a.GE=function(b){this.Hd=b;var c=b.gb.Oa(),b=(b=ew(b))&&b.Mf()&&b.Oa()==c?b:k;if(Xq){if(c=b,this.$r=m,c){var d=cq(c),e=dq(c);if(d&&e){var b=c.Lh()?c.Ha():c.sa(),d=new HD(d,this.Hd.m()),g=eq(c),e=new HD(e,this.Hd.m());c.Lh()?(this.Aa=e,this.Mz=g,this.xa=d,this.Iv=b):(this.Aa=d,this.Mz=b,this.xa=e,this.Iv=g);this.$r=j}}}else Wq&&(c=b,this.$r=m,c&&(b=c.oe(0).Kd(),sc(this.Hd.m(),b.parentElement())&&(c=this.Hd.gb.Ba().body.createTextRange(),c.moveToElementText(this.Hd.m()),e=b.duplicate(),e.collapse(j),
e.setEndPoint("StartToStart",c),this.Aa=IE(e),b=b.duplicate(),b.setEndPoint("StartToStart",c),this.xa=IE(b),this.$r=j)))};GE.prototype.isValid=p("$r");GE.prototype.toString=function(){return Xq?"W3C:"+this.Aa.toString()+"\n"+this.Mz+":"+this.xa.toString()+"\n"+this.Iv:"IE:"+this.Aa+","+this.xa};GE.prototype.select=function(){var b=this.ne(this.Hd.m());b&&(Wq&&this.Hd.m().focus(),Sq(b).select())};
GE.prototype.ne=function(b){if(Xq){var c=ID(this.Aa,b),b=ID(this.xa,b);return!c||!b?k:Dq(c,this.Mz,b,this.Iv).Kd()}c=b.ownerDocument.body.createTextRange();c.moveToElementText(b);c.collapse(j);c.moveEnd("character",this.xa);c.moveStart("character",this.Aa);return c};
a.IE=function(b){var c=b.duplicate(),d=b.text,e=d.length;c.collapse(j);c.moveEnd("character",e);for(var g,h=10;(g=c.compareEndPoints("EndToEnd",b))&&!(e-=g,c.moveEnd("character",-g),--h,0==h););b=0;for(c=d.indexOf("\n\r");-1!=c;)++b,c=d.indexOf("\n\r",c+1);return e+b};a.JE=function(b,c){Fp.call(this,b||Oy.O(),c)};y(JE,Fp);gp("goog-toolbar-separator",function(){return new JE});a.LE=function(b,c){N.call(this);this.da=new le(this);this.Hd=b;this.qb=c;this.Ry=[];Oh(this.qb,function(b){b.bb&&this.Ry.push(KE(b.Ld()))},this);this.qb.Fe(m);this.da.e(this.Hd,"cvc",this.rT).e(this.qb,"action",this.XL)};y(LE,Gd);a.KE=function(b){return b};t=LE.prototype;t.h=p("da");t.gr=p("Hd");t.R=function(){return this.qb.R()};t.D=function(b){this.qb.D(b)};t.isEnabled=function(){return this.qb.isEnabled()};t.Xa=function(b){this.qb.Xa(b)};t.blur=function(){this.qb.Oc(k)};
t.w=function(){LE.n.w.call(this);this.da&&(this.da.G(),delete this.da);this.qb&&(this.qb.G(),delete this.qb);delete this.Hd;delete this.Ry};t.rT=function(b){if(this.qb.isEnabled()&&this.dispatchEvent("change")){var c;try{c=this.Hd.queryCommandValue(b.AK||this.Ry)}catch(d){c={}}var b=c,e;for(e in b)if(c=Mh(this.qb,e)){var g=b[e];c.pi?c.pi(g):c.Uc(!!g)}}};t.XL=function(b){var c=b.target.Ld();this.Hd.execCommand(c,b.target.V())};a.ME=function(b){this.qL=b};y(ME,gd);ME.prototype.type="ok";a.NE=function(b){gd.call(this,"change");this.isValid=b};y(NE,gd);a.OE=function(b){return!b?"":"//www.zhihu.com/equation?tex="+encodeURIComponent(b)};a.PE=function(b){T.call(this,b)};y(PE,T);PE.prototype.hj="";PE.prototype.D=function(b){R(this.m(),b)};a.RE=function(b,c,d,e,g,h,l,n){this.ni=c;this.vk=l||[];for(var c=n||QE.O(),n=[],d=-d,e=-e,q=0;q<l.length;q++)n.push(L("DIV",{"class":c.L()+"-item",style:"width:"+g+"px;height:"+h+"px;background-position:"+d+"px "+e+"px;"})),d-=g;this.Sf=b;gz.call(this,n,c)};y(RE,gz);t=RE.prototype;t.Gh=p("ni");t.gl=function(b){return 0<=b&&b<this.vk.length?this.vk[b]:k};t.Kf=function(b){RE.n.Kf.call(this,b);this.Sf.dispatchEvent(new SE(TE,this))};
t.Hh=function(b){RE.n.Hh.call(this,b);b.relatedTarget&&!sc(this.m(),b.relatedTarget)&&this.Sf.qv()};t.fd=function(b){RE.n.fd.call(this,b);b.relatedTarget&&!sc(this.m(),b.relatedTarget)&&this.Sf.rv.stop()};a.SE=function(b,c,d){gd.call(this,b,d);this.KQ=c},a.TE="a";SE.prototype.rw=p("KQ");a.QE=function(){};y(QE,Zy);ia(QE);QE.prototype.L=s("ee-palette");a.UE=function(b){RE.call(this,b,"a",0,150,18,18,"\\leftarrow \\rightarrow \\leftrightarrow \\Leftarrow \\Rightarrow \\Leftrightarrow \\uparrow \\downarrow \\updownarrow \\Uparrow \\Downarrow \\Updownarrow".split(" "));kz(this,new Ob(12,1))};y(UE,RE);a.VE=function(b){RE.call(this,b,"c",0,70,18,18,"\\leq \\geq \\prec \\succ \\preceq \\succeq \\ll \\gg \\equiv \\sim \\simeq \\asymp \\approx \\ne \\subset \\supset \\subseteq \\supseteq \\in \\ni \\notin".split(" "));kz(this,new Ob(7,3))};y(VE,RE);a.WE=function(b){RE.call(this,b,"g",0,30,18,18,"\\alpha \\beta \\gamma \\delta \\epsilon \\varepsilon \\zeta \\eta \\theta \\vartheta \\iota \\kappa \\lambda \\mu \\nu \\xi \\pi \\varpi \\rho \\varrho \\sigma \\varsigma \\tau \\upsilon \\phi \\varphi \\chi \\psi \\omega \\Gamma \\Delta \\Theta \\Lambda \\Xi \\Pi \\Sigma \\Upsilon \\Phi \\Psi \\Omega".split(" "));kz(this,new Ob(7,6))};y(WE,RE);a.XE=function(b){RE.call(this,b,"m",0,90,30,56,"x_{a};x^{b};x_{a}^{b};\\bar{x};\\tilde{x};\\frac{a}{b};\\sqrt{x};\\sqrt[n]{x};\\bigcap_{a}^{b};\\bigcup_{a}^{b};\\prod_{a}^{b};\\coprod_{a}^{b};\\left( x \\right);\\left[ x \\right];\\left{ x \\right};\\left| x \\right|;\\int_{a}^{b};\\oint_{a}^{b};\\sum_{a}^{b}{x};\\lim_{a \\rightarrow b}{x}".split(";"));kz(this,new Ob(10,2))};y(XE,RE);a.ZE=function(b){RE.call(this,b,"mn",0,0,46,18,["g","s","c","m","a"],YE.O());kz(this,new Ob(5,1))};y(ZE,RE);ZE.prototype.D=function(b,c){return ZE.n.D.call(this,j,c)};a.YE=function(){};y(YE,QE);ia(YE);YE.prototype.L=s("ee-menu-palette");a.$E=function(b){RE.call(this,b,"s",0,50,18,18,"\\times \\div \\cdot \\pm \\mp \\ast \\star \\circ \\bullet \\oplus \\ominus \\oslash \\otimes \\odot \\dagger \\ddagger \\vee \\wedge \\cap \\cup \\aleph \\Re \\Im \\top \\bot \\infty \\partial \\forall \\exists \\neg \\angle \\triangle \\diamond".split(" "));kz(this,new Ob(7,5))};y($E,RE);a.aF=function(){N.call(this);this.hG={};this.zm=k;this.N=new le(this);this.rv=new Id(300);this.N.e(this.rv,Jd,this.vD)};y(aF,Gd);t=aF.prototype;t.rw=function(b){var c=this.hG,d=c[b];if(!d){switch(b){case "mn":d=new ZE(this);break;case "g":d=new WE(this);break;case "s":d=new $E(this);break;case "c":d=new VE(this);break;case "m":d=new XE(this);break;case "a":d=new UE(this);break;default:f(Error("Invalid palette type!"))}c[b]=d}return d};
t.setActive=function(b){var c=this.zm;c&&c.D(m);this.zm=c=this.rw(b);c.D(j);return c};t.qv=function(){this.rv.start()};t.vD=function(){this.setActive("mn")};t.w=function(){aF.n.w.call(this);this.hG=this.zm=k};a.bF=function(b,c,d){T.call(this,d);this.hj=c;this.Sf=b.JQ};y(bF,PE);t=bF.prototype;t.OE="";t.Uu=0;
t.v=function(){var b=x("TeX 公式"),c=x("预览"),d=x("Learn more"),e=this.aa,d=e.v("DIV",{style:"display: none;"},e.v("SPAN",{"class":"ee-section-title ee-section-title-floating"},b),this.hj?e.v("A",{id:"ee-section-learn-more",target:"_blank",href:this.hj},d):k,e.v("DIV",{style:"clear: both;"}),b=this.SN=e.v("DIV",{style:"position: relative"}));this.Sf.setActive("mn").W(b);b.appendChild(e.v("DIV",{style:"clear:both"}));var g=this.ah=e.v("textarea",{"class":"ee-tex",dir:"ltr"});b.appendChild(g);b.appendChild(e.v("DIV",
{"class":"ee-section-title"},c));c=this.YQ=e.v("DIV",{"class":"ee-preview-container"});b.appendChild(c);this.g=d};t.B=function(){this.xH=new $u(this.ah);O(this.xH,"input",this.ND,m,this);this.h().e(this.ah,"keydown",this.ND);this.h().e(this.Sf,TE,this.VM,m,this)};t.D=function(b){bF.n.D.call(this,b);b&&Kd(this.BL,0,this)};t.BL=function(){this.ah.focus();Zs(this.ah,this.ah.value.length)};
a.cF=function(b){var c=b.kl();if(c!=b.OE){b.OE=c;var d=!(1024<c.length);b.dispatchEvent(new NE(d));var b=b.YQ,e=Sb(b);e.Ws(b);c&&(d?c=e.v("IMG",{src:OE(c)}):(c=x("Equation is too long"),c=e.v("DIV",{"class":"ee-warning"},c)),e.appendChild(b,c))}};t.ND=function(){this.Uu++;Kd(v(this.hN,this,this.Uu),500)};t.hN=function(b){b==this.Uu&&cF(this)};
t.VM=function(b){var c=b.rw(),d=this.Sf,e=d.zm,b=this.ah;if("mn"==c.Gh()){var g=c.Db,g=-1!=g?c.gl(g):k;if(e!=c&&e.Gh()==g){d.vD();return}g&&(c=this.Sf.setActive(g),c.m()||c.W(this.SN),c=c.m(),ag(c,0,-c.clientHeight))}else{e=this.Sf.zm;g=e.gl(e.Db);if(!g)return;Kd(v(this.$N,this,g+" "),0)}b.focus()};t.$N=function(b){var c=this.ah,d=Bm(c),e=c.value,e=e.substring(0,d)+b+e.substring(d);c.value=e;Zs(c,d+b.length);cF(this)};t.kl=function(){return this.ah.value};t.nz=function(b){this.ah.value=b;cF(this)};
t.w=function(){this.xH.G();this.Sf=k;bF.n.w.call(this)};a.dF=function(b,c,d){T.call(this,d);this.WB=b;this.hj=c};y(dF,T);t=dF.prototype;t.bh=k;t.v=function(){dF.n.v.call(this);this.Aq()};t.Aq=function(){var b=this.m();this.bh=new bF(this.WB,this.hj,this.aa);this.H(this.bh);this.bh.W(b);this.bh.D(j)};t.ca=function(b){this.g=b;this.Aq()};t.kl=function(){return this.bh.kl()};t.nz=function(b){this.bh.nz(b)};t.pw=function(){var b=this.kl(),c=OE(b);return!c?"":'<img src="'+c+'" alt="'+Wa(b)+'" class="ee_img tr_noresize" eeimg="1" style="vertical-align: middle">'};
t.isValid=function(){return 1024<this.kl().length};t.D=function(b){this.bh.D(b)};t.w=function(){this.bh&&this.bh.G();this.WB=k;dF.n.w.call(this)};a.eF=function(b,c,d,e){eE.call(this,c);this.Vi=new dF(b,e);this.Vi.W();this.Vi.nz(d);this.Vi.addEventListener("+equation",this.lo,m,this)};y(eF,eE);eF.prototype.hv=function(){var b=new fE(this),c=x("公式编辑器"),d=x("插入公式"),e=x("保存"),d=this.Vi.kl()?e:d;gE(hE(b.Ma(c).Ea(this.Vi.m())),d);return iE(b)};eF.prototype.Xm=function(){if(this.Vi.isValid())return k;var b=this.Vi.pw();return new ME(b)};eF.prototype.lo=function(b){this.EF||(this.EF=this.jw("ok"));this.EF.disabled=!b.isValid};a.fF=function(b){this.hj=b||"";jE.call(this,"+equation")};y(fF,jE);t=fF.prototype;t.Ca=ke("goog.editor.plugins.EquationEditorPlugin");t.ed=lf("EquationEditorPlugin");t.gv=function(b,c){var d=c||k,e;d?(e=d.getAttribute("alt"),e||(e=d.getAttribute("src"),e=!e?"":decodeURIComponent(e.match(we)[6]||k).slice(4)||"")):e="";this.gG=d;d={};d.JQ=new aF;d=new eF(d,b,e,this.hj);d.addEventListener("ok",this.xn,m,this);return d};t.enable=function(b){fF.n.enable.call(this,b)};
t.disable=function(b){fF.n.disable.call(this,b)};t.xn=function(b){lE(this);this.C.uh();b=ec(QC(this).Ga,b.qL);if(this.gG)mc(b,this.gG);else{var c=ew(this.C);c.isCollapsed()||c.Sc();b=c.insertNode(b,m)}Xs(b,m);this.C.Re()};a.gF=function(){$D.call(this)};y(gF,$D);x("Equation:");a.hF=x("Edit"),a.iF=x("Remove");t=gF.prototype;t.ed=s("EquationBubble");t.NL=function(b){return b&&"IMG"==b.nodeName&&(b.getAttribute("eeimg")||E.has(b,"ee_img"))?b:k};t.HK=function(b){this.Cq("ee_bubble_edit",hF,this.iL,b,"zg-icon zg-icon-pen");this.Cq("ee_remove_remove",iF,this.pR,b,"zg-icon zg-icon-trash")};t.iw=s("IMG");t.hD=function(){return x("Equation")};t.pR=function(){this.C.uh();M(this.Dt);cE(this);this.C.Re()};
t.iL=function(){var b=this.Dt;cE(this);this.C.execCommand("+equation",b)};a.jF=function(b){Cv.call(this);this.nA="http://upload."+dh.$l+":"+location.port+"/upload";H.extend(this.F={},this.defaults,b||{})};y(jF,Cv);t=jF.prototype;t.defaults={LX:ha};t.ed=lf("FastUpload");
t.enable=function(b){if(!this.isEnabled(b)&&!(!window.URL&&!window.webkitURL||!window.FileReader||!window.FormData||!document.addEventListener)){$.fn.draghover=function(){return this.each(function(){var b=$(),c=$(this),d=j;c.on("dragenter",function(l){l=l.originalEvent;0===b.size()&&(d&&z.contains(l.dataTransfer.types,"Files"))&&c.trigger("draghoverstart",l);b=b.add(l.target)});c.on("dragleave",function(l){setTimeout(function(){b=b.not(l.target);0===b.size()&&d&&c.trigger("draghoverend",l)},1)});
c.on("dragstart",function(){d=m});c.on("drop dragend",function(){b=$();c.trigger("draghoverend");d=j})})};this.yA=$(this.C.m());var c=QC(this),d=$('<div class="editable-dropzone"><div class="row"><div class="cell"><div>拖拽至此处上传</div></div></div></div>');c.nx(d[0],this.C.m());c=this.nI=d;new le(this);b.m().addEventListener("paste",v(this.Nw,this));document.addEventListener("dragover",v(this.vM,this),m);c.on("dragover",v(this.uM,this));c.get(0).addEventListener("drop",v(this.qr,this),m);$(window).draghover().on({draghoverstart:v(this.xD,
this),draghoverend:v(this.wM,this)});c.draghover().on({draghoverstart:v(this.oM,this),draghoverend:v(this.xD,this)})}};t.vM=function(b){z.contains(b.dataTransfer.types,"Files")&&(b.dataTransfer.dropEffect="none",b.preventDefault())};t.uM=function(b){b=b.originalEvent;b.dataTransfer.dropEffect="copy";b.preventDefault();b.stopPropagation()};t.xD=function(b){b.preventDefault();b.stopPropagation();kF(this,1)};t.oM=function(b){kF(this,2);b.stopPropagation()};
t.wM=function(b){b.preventDefault();kF(this,0)};a.kF=function(b,c){var d=[{display:"none"},{display:"table",width:b.yA.width(),height:b.yA.height(),"background-color":"rgba(255, 255, 255, 0.5)"}];d[2]=$.extend({},d[1],{"background-color":"rgba(245, 245, 245, 0.5)"});b.nI.css(d[c])};t.Nw=function(b){var c=this;b.clipboardData&&z.contains(b.clipboardData.types,"Files")&&z.forEach(b.clipboardData.items,function(d){-1<d.type.indexOf("image")&&(lF(c,d.getAsFile()),b.preventDefault())})};
t.qr=function(b){var c=this;c.C.execCommand("clearlorem");var d=b.dataTransfer.files;document.createElement("img");b.preventDefault();var e=[];z.forEach(d,function(b){-1<b.type.indexOf("image")?(lF(c,b),e.push(j)):e.push(m)});z.every(e,function(b){return!b})&&U("文件类型不支持！");kF(c,0)};
a.lF=function(b,c){var d=new FormData;d.append("via","xhr2");d.append("upload_file",c);var e;e=$.ajaxSettings.xhr();e.withCredentials=j;var g=$.ajax({url:b.nA,data:d,processData:m,contentType:m,xhr:function(){return e},type:"POST"}).done(function(b){"string"===$.type(b)&&(b=JSON.parse(b));if(1===b.code)U(b.msg);else{var c=new Image;c.src=b.msg[0];c.setAttribute("originImgSrc",c.src.replace("_m.jpg","_r.jpg"));c.setAttribute("data-rawWidth",b.msg[1]);c.setAttribute("data-rawHeight",b.msg[2]);g.DA.after(c)}}).fail(function(){U("上传失败！>_<")}).always(function(){g.DA.remove()}),
d=g,h;h=QC(b);var l=h.v("IMG",{"class":"",style:"display:block",src:"http://static.zhihu.com/static/img/spinner2.gif"}),n=ew(b.C);!n||!gD(n)||!sc(b.C.m(),n.Bb())?At(b.C.field)?lc(b.C.m(),l,0):b.C.m().appendChild(l):n.Wf(l);A||(Xs(l,m),h.Oa().focus());Fv(b.C);h=$(l);d.DA=h};a.mF={},a.sF=function(b,c,d){function e(b){nc(b)}function g(c,d){for(;c!==b;){if(d(c))return c;c=c.parentNode}return k}function h(b){return b.tagName&&b.tagName===c}b||f("Missing Editable Container");c||(c="blockquote");var c=c.toUpperCase(),l=Rq();if(l&&nF(b,cq(l))&&nF(b,dq(l))){var n=SC(l.U(),l.sa(),l.fa(),l.Ha()),q;if(l.isCollapsed())q=[];else{var r=l.qc(),w=l.U(),F=l.fa();q=r.childNodes;var I=function(b){return w!==r&&!nF(b,w)},G=function(b){return!(b.previousSibling&&nF(b.previousSibling,F))};
q=P.toArray(1===q.length?q:P.Vz(P.hL(q,I),G))}var I=l.Bb(),G=g(I,h),Q=z.reduce(q,function(b,d){1===d.nodeType&&(h(d)?b.push(d):b.push.apply(b,z.toArray(d.getElementsByTagName(c))));return b},[]),W;if(G){if(d)return oF.fu;nc(G)}else if(Q.length){if(d)return oF.fu;z.forEach(Q,e)}else{if(d)return oF.LA;if(d=g(I,function(b){return z.contains(pF,b.tagName.toLowerCase())}))W=document.createElement(c),d.parentNode.insertBefore(W,d),W.appendChild(d);else if(l.U()!==l.fa())W=document.createElement(c),q[0].parentNode.insertBefore(W,
q[0]),z.forEach(q,function(b){W.appendChild(b)});else{n=c;qF.VI?document.execCommand("formatBlock",m,n):(d=Rq(),l=d.qc(),ra(l)&&1==l.nodeType&&At(l)?(n=document.createElement(n),l===b?l.appendChild(n):mc(n,l),(C||B)&&n.appendChild(document.createElement("br")),zt(n)):(d=d.fa(),d=Hc(d,function(b){return jD(b.parentNode)||XC(b.parentNode)},j),l=P.Vz(new gt(d,j,j),rf(rF)),d=P.Vz(new gt(d,m,m),rf(rF)),l=P.toArray(l).reverse().concat(P.toArray(d)),l.length&&(n=document.createElement(n),d=z.Qd(l),(q=d.nextSibling)&&
(q&&"BR"===q.tagName)&&M(q),kc(n,d),hc(n,l),(C||B)&&n.appendChild(document.createElement("br")),Xs(n.lastChild))));return}}n&&(l=function(c,d){return c&&nF(b,c)&&Qs(c)>=d},l(n.U(),n.sa())&&l(n.fa(),n.Ha())&&n.select())}else if(d)return oF.LA},a.rF=function(b){return b&&"BR"===b.tagName||jD(b)||XC(b)},a.nF=function(b,c){return 3===b.nodeType?b===c:b.contains(3===c.nodeType?c.parentNode:c)},a.pF=["ul","ol","dl","table"],a.oF={fu:1,LA:0},a.qF=mF;qF.VI=!A;qF.toggle=sF;
qF.Md=function(b,c){return sF(b,c,j)};qF.QI=oF;a.tF=function(){Cv.call(this)};y(tF,Cv);t=tF.prototype;t.ed=lf("Blockquote");t.we=function(b){return"+blockquote"===b};t.Ve=function(b){this.we(b)&&mF.toggle(this.C.m())};t.queryCommandValue=function(){return mF.QI.fu===mF.Md(this.C.m())};t.Lw=function(b){if(13===b.keyCode)return this.Fw(b)};t.wz=function(b,c){return uF(b,c).wz};
a.uF=function(b,c){function d(b,c){return{wz:b,BF:c}}C&&(b.normalize(),c=Rq());var e,g=c;e=g.fa();var h=g.Ha(),g=g.qc(),l=g.childNodes.length;3!==e.nodeType&&l&&(e=g.childNodes[h===l?l-1:h]);if(!e)return d(m,k);if(At(b))return d(j,b);for(h=e;h!==b;){if(kD(h))return d(m,k);h=h.parentNode}return e&&"BR"===e.tagName&&e.previousSibling&&"BR"===e.previousSibling.tagName?d(j,e):(e=c.Bb())&&1===e.nodeType&&(!e.childNodes.length||At(e))?d(j,e):d(m,k)};
t.Fw=function(b){var c=ew(this.C);if(c.isCollapsed()){var d;a:{d=c.fa();for(var e=this.C.field;d!==e;){if("BLOCKQUOTE"===d.tagName)break a;d=d.parentNode}d=i}if(d&&(c=uF(d,c),c.wz)){b.preventDefault();b=document.createElement("div");kc(b,d);if(C||B)(d=(d=d.nextSibling)&&"BR"===d.tagName&&d)||(d=document.createElement("br")),b.appendChild(d);Tq(b,0).select();c.BF&&M(c.BF)}}};MA["+blockquote"]={bb:j,Q:"引用内容",va:"+blockquote",La:"tr-icon tr-blockquote",factory:Nz};a.vF=function(b,c){this.cb=b;this.rA=!c};
vF.prototype.Zh=function(b,c,d){var e,g=[];if(""!=b){e=$a(b);var h=RegExp("(^|\\W+)"+e,"i");P.some(this.cb,function(b){String(b).match(h)&&g.push(b);return g.length>=c})}e=g;if(0==e.length&&this.rA){var l=[];P.forEach(this.cb,function(c,d){var e=b.toLowerCase(),g=String(c).toLowerCase(),h=0;if(-1!=g.indexOf(e))h=parseInt((g.indexOf(e)/4).toString(),10);else for(var n=e.split(""),Q=-1,W=10,ja=0,Ja;Ja=n[ja];ja++)Ja=g.indexOf(Ja),Ja>Q?(Q=Ja-Q-1,Q>W-5&&(Q=W-5),h+=Q,Q=Ja):(h+=W,W+=5);h<6*e.length&&l.push({ES:c,
TG:h,index:d})});l.sort(function(b,c){var d=b.TG-c.TG;return 0!=d?d:b.index-c.index});e=[];for(var n=0;n<c&&n<l.length;n++)e.push(l[n].ES)}d(b,e)};a.wF=function(b){T.call(this);H.extend(this.F={},this.defaults,b||{});this.Wd=k};y(wF,T);
a.xF=[["ABAP",["abap"]],["ActionScript",["as","actionscript"]],["Ada",["ada","ada95ada2005"]],["ANTLR",["antlr"]],["ApacheConf",["apacheconf","aconf","apache"]],["AppleScript",["applescript"]],["AspectJ",["aspectj"]],["Asymptote",["asy","asymptote"]],["AutoHotkey",["ahk"]],["Awk",["awk","gawk","mawk","nawk"]],["BBCode",["bbcode"]],["Base Makefile",["basemake"]],["Bash",["bash","sh","ksh"]],["Batchfile",["bat"]],["Befunge",["befunge"]],["BlitzMax",["blitzmax","bmax"]],["Boo",["boo"]],["Brainfuck",
["brainfuck","bf"]],["Bro",["bro"]],["BUGS",["bugs","winbugs","openbugs"]],["C",["c"]],["CMake",["cmake"]],["c-objdump",["c-objdump"]],["aspx-cs",["aspx-cs"]],["C#",["csharp","c#"]],["Ceylon",["ceylon"]],["CFEngine3",["cfengine3","cf3"]],["Cheetah",["cheetah","spitfire"]],["Clojure",["clojure","clj"]],["CoffeeScript",["coffee-script","coffeescript"]],["Coldfusion HTML",["cfm"]],["cfstatement",["cfs"]],["Common Lisp",["common-lisp","cl"]],["Coq",["coq"]],["C++",["cpp","c++"]],["cpp-objdump",["cpp-objdump",
"c++-objdumb","cxx-objdump"]],["Croc",["croc"]],["CSS",["css"]],["CUDA",["cuda","cu"]],["Cython",["cython","pyx"]],["D",["d"]],["d-objdump",["d-objdump"]],["Darcs Patch",["dpatch"]],["Dart",["dart"]],["Delphi",["delphi","pas","pascal","objectpascal"]],["dg",["dg"]],["Diff",["diff","udiff"]],["Django/Jinja",["django","jinja"]],["DTD",["dtd"]],["Duel","duel;Duel Engine;Duel View;JBST;jbst;JsonML+BST".split(";")],["Dylan",["dylan"]],["ECL",["ecl"]],["eC",["ec"]],["Erlang",["erlang"]],["Elixir",["elixir",
"ex","exs"]],["ERB",["erb"]],["Evoque",["evoque"]],["FSharp",["fsharp"]],["Factor",["factor"]],["Fancy",["fancy","fy"]],["Fantom",["fan"]],["Felix",["felix","flx"]],["Fortran",["fortran"]],["GLSL",["glsl"]],["GAS",["gas"]],["Genshi",["genshi","kid","xml+genshi","xml+kid"]],["Gettext Catalog",["pot","po"]],["Gherkin",["Cucumber","cucumber","Gherkin","gherkin"]],["Gnuplot",["gnuplot"]],["Go",["go"]],["GoodData-CL",["gooddata-cl"]],["Gosu",["gosu"]],["Gosu Template",["gst"]],["Groff",["groff","nroff",
"man"]],["Groovy",["groovy"]],["Haml",["haml","HAML"]],["Haskell",["haskell","hs"]],["haXe",["hx","haXe"]],["HTML",["html"]],["HTTP",["http"]],["Hxml",["haxeml","hxml"]],["Hybris",["hybris","hy"]],["INI",["ini","cfg"]],["Io",["io"]],["Ioke",["ioke","ik"]],["IRC logs",["irc"]],["Jade",["jade","JADE"]],["JavaScript",["js","javascript"]],["JSON",["json"]],["Java",["java"]],["Java Server Page",["jsp"]],["Julia console",["jlcon"]],["Julia",["julia","jl"]],["Kconfig",["kconfig","menuconfig","linux-config",
"kernel-config"]],["Koka",["koka"]],["Kotlin",["kotlin"]],["Lasso",["lasso","lassoscript"]],["Lighttpd configuration file",["lighty","lighttpd"]],["Literate Haskell",["lhs","literate-haskell"]],["LiveScript",["live-script","livescript"]],["LLVM",["llvm"]],["Logtalk",["logtalk"]],["Lua",["lua"]],["MOOCode",["moocode"]],["Makefile",["make","makefile","mf","bsdmake"]],["Mako",["mako"]],["MAQL",["maql"]],["Mason",["mason"]],["Matlab",["matlab"]],["Matlab session",["matlabsession"]],["MiniD",["minid"]],
["Modelica",["modelica"]],["Modula-2",["modula2","m2"]],["MoinMoin/Trac Wiki markup",["trac-wiki","moin"]],["Monkey",["monkey"]],["MoonScript",["moon","moonscript"]],["Mscgen",["mscgen","msc"]],["MuPAD",["mupad"]],["MXML",["mxml"]],["MySQL",["mysql"]],["Myghty",["myghty"]],["NASM",["nasm"]],["Nemerle",["nemerle"]],["NewLisp",["newlisp"]],["Newspeak",["newspeak"]],["Nginx configuration file",["nginx"]],["Nimrod",["nimrod","nim"]],["NumPy",["numpy"]],["objdump",["objdump"]],["Objective-C",["objective-c",
"objectivec","obj-c","objc"]],["Objective-J",["objective-j","objectivej","obj-j","objj"]],["OCaml",["ocaml"]],["Octave",["octave"]],["Ooc",["ooc"]],["Opa",["opa"]],["OpenEdge ABL",["openedge","abl","progress"]],["Perl",["perl","pl"]],["PHP",["php","php3","php4","php5"]],["PL/pgSQL",["plpgsql"]],["PostScript",["postscript"]],["PostgreSQL console (psql)",["psql","postgresql-console","postgres-console"]],["PostgreSQL SQL dialect",["postgresql","postgres"]],["POVRay",["pov"]],["PowerShell",["powershell",
"posh","ps1"]],["Prolog",["prolog"]],["Properties",["properties"]],["Protocol Buffer",["protobuf"]],["Python",["python","py","sage"]],["Python Traceback",["pytb"]],["RConsole",["rconsole","rout"]],["Racket",["racket","rkt"]],["Embedded Ragel",["ragel-em"]],["Raw token data",["raw"]],["Rd",["rd"]],["REBOL",["rebol"]],["Redcode",["redcode"]],["RHTML",["rhtml","html+erb","html+ruby"]],["RobotFramework",["RobotFramework","robotframework"]],["reStructuredText",["rst","rest","restructuredtext"]],["Ruby",
["rb","ruby","duby"]],["Rust",["rust"]],["S",["splus","s","r"]],["Standard ML",["sml"]],["Sass",["sass","SASS"]],["Scala",["scala"]],["Scaml",["scaml","SCAML"]],["Scheme",["scheme","scm"]],["Scilab",["scilab"]],["SCSS",["scss"]],["Smali",["smali"]],["Smalltalk",["smalltalk","squeak"]],["Smarty",["smarty"]],["Snobol",["snobol"]],["SourcePawn",["sp"]],["Debian Sourcelist",["sourceslist","sources.list"]],["SQL",["sql"]],["sqlite3con",["sqlite3"]],["SquidConf",["squidconf","squid.conf","squid"]],["Scalate Server Page",
["ssp"]],["Stan",["stan"]],["systemverilog",["sv"]],["Tcl",["tcl"]],["Tcsh",["tcsh","csh"]],["Tea",["tea"]],["TeX",["tex","latex"]],["Text",["text"]],["Treetop",["treetop"]],["UrbiScript",["urbiscript"]],["VGL",["vgl"]],["Vala",["vala","vapi"]],["aspx-vb",["aspx-vb"]],["VB.net",["vb.net","vbnet"]],["Velocity",["velocity"]],["verilog",["v"]],["vhdl",["vhdl"]],["VimL",["vim"]],["XQuery",["xquery","xqy","xq","xql","xqm"]],["XML",["xml"]],["XSLT",["xslt"]],["Xtend",["xtend"]],["YAML",["yaml"]]],a.yF=
function(b){return{label:b[0],value:b[1][0],toString:lf(b[0])}},a.zF=z.map(xF,yF);t=wF.prototype;t.defaults={UR:"lang-select",vq:"collapsed",BO:"lang-list",EQ:"lang-option",wk:"active",LB:"checked"};t.w=function(){wF.n.w.call(this);this.h().G();this.Y.G();M(this.g);this.ar=this.Gt=this.g=k};t.v=function(){var b=this.F;this.g=L("div",{innerHTML:this.template,className:[b.UR,b.vq].join(" ")})};t.template='<div class="title-button">选择语言</div><i class="zg-icon zg-icon-double-arrow"></i><div class="input-wrapper"><input class="filter-input zg-form-text-input" placeholder="搜索语言"></div>';
t.B=function(){wF.n.B.call(this);this.Gt=K("title-button",this.g);this.ar=K("filter-input",this.g);ug(this.Gt,j);var b=this.ar,c=this.g,d=this.F,e=this.h(),g=this,h=g.F,l={},n=new vF(zF,m),c=new Qm(c,l),q=new Dm(k,k,m),r=n.Zh;n.Zh=function(b,c,d){Ma(b)?r.apply(this,arguments):d(b,zF)};l.Tc=function(b,c,d){b=b.data;b.value===g.Wd&&(E.add(d,h.LB),d.appendChild(L("i","icon "+h.LB)));d.appendChild(document.createTextNode(b.toString()))};var w=new tm(n,c,q);q.Y=w;q.Ak(b);w.El=20;e.e(w,"suggestionsupdate",
function(){w.re(w.Ec+0)}).e(w,"update",function(b){this.sy(b.Eo)}).e(w,"dismiss",function(){this.ci(j)});b=w.M;b.className=d.BO;b.$h=d.EQ;b.lu=d.wk;this.Y=w;this.h().e(this.g,"click",this.mr).e(this.Gt,"click",this.iN)};t.V=p("Wd");t.za=function(b){var c=b&&z.find(zF,function(c){return c.value===b});c&&(this.Wj(c.label),this.dispatchEvent({type:"change",DQ:c}));this.Wd=b};
t.mr=function(b){var c=this.Y,d=c.M.m();d&&(document.activeElement!==this.ar&&!d.contains(b.target))&&(b.preventDefault(),b.stopPropagation(),vm(c))};t.iN=function(){this.isCollapsed()&&this.ci(m)};t.isCollapsed=function(){return E.has(this.g,this.F.vq)};t.ci=function(b){if(this.isCollapsed()!==b){var c=this.ar,d=this.F;b?E.add(this.g,d.vq):(E.remove(this.g,d.vq),b=this.Y,d=b.M,b.Yl(zF),d.m().scrollTop=0,d.show(),c.value="",c.focus())}};t.Wj=function(b){var c=this.Gt;c.title=b;xc(c,b)};
t.sy=function(b){this.za(b.value);this.Y.Cc()};a.AF=function(b){Cv.call(this);H.extend(this.F={},this.defaults,b||{});this.Ov=this.qb=k};y(AF,Cv);
a.BF=C||rb||B,a.CF=function(b){return"P"===b.tagName},a.DF=function(b){return 3===b.nodeType},a.EF=function(b){return b&&"PRE"===b.tagName},a.FF=function(b){function c(b){return z.contains(g,b)}function d(){var b=document.createTextNode("\n");g.push(b);return b}var e=document.createElement("div");e.innerHTML=b;var g=[],h=rf(c),b=zc(e,jD);(0,z.forEach)(b,function(b){b.lastChild&&"BR"===b.lastChild.tagName&&b.removeChild(b.lastChild);b.firstChild||b.appendChild(document.createTextNode(""));b.insertBefore(d(),
b.firstChild);b.appendChild(d())});b=z.toArray(e.getElementsByTagName("br"));(0,z.forEach)(b,function(b){b!==b.parentNode.lastChild&&mc(document.createTextNode("\n"),b)});e=zc(e,DF);e=pf(function(b){return z.filter(b,function(d,e){var g=b[e-1];return!g||!(c(g)&&c(d))})},function(b){var c=z.Wv(b,h);return-1!==c?b.slice(0,c+1):b},function(b){var c=z.Vv(b,h);return-1!==c?b.slice(c):b})(e);return(0,z.map)(e,function(b){return b.nodeValue}).join("").replace(/\xa0/g," ")};t=AF.prototype;t.ed=lf("CodePlugin");
t.we=function(b){return"+code"===b};t.Ve=function(b){this.we(b)&&this.trigger()};t.queryCommandValue=function(){var b="1"===GF(this).state,c=this.C.Fh("EnterHandler");c&&(b?c.disable(this.C):c.enable(this.C));this.qb&&this.Ov&&Oh(this.qb,function(c){c instanceof Ty&&c.Xa(!b||z.contains(this.Ov,c.Ld()))},this);return b};t.defaults={UK:""};t.aS=function(b){this.qb=b;this.Ov=["toggleFullScreen"].concat("+code")};t.w=function(){AF.n.w.call(this);this.qb=k};
a.HF=function(b,c,d){for(b=b.C.field;c!==b;){if(d(c))return c;c=c.parentNode}},a.GF=function(b){var c,d=Rq();d&&b.C.field.contains(d.Bb())?(c=d.U(),b=(c=HF(b,c,EF))?"1":"2"):b="0";return{state:b,vo:d,code:c}};
t.trigger=function(){var b=GF(this),c=b.vo,d=b.code;switch(b.state){case "1":var e=!Ma(Gc(d)),b=kD(d);e?(d.parentNode.removeChild(d),b&&Xs(b,j)):(c=c.U()&&c.fa()?new TC(c):k,e=Pa(d.innerHTML),it(P.filter(new gt(d,m,j),ht))&&(e="<br>"+e),b&&"BR"!==b.tagName&&(e+="<br>"),b=fc(e),d.parentNode.replaceChild(b,d),c.restore());break;case "2":this.Tr(c,Ma(c.Gc())?FF(c.Nd()):BF?"\n":"")}};
t.Ii=function(b,c){var d=document.createElement(b);d.id=Ih(Hh.O());return c(d,function(){d=J(d.id);d.removeAttribute("id");return d})};
t.kg=function(){var b=this.C,c=this.C.field,d,e=new to(EF,m,k,c),g=L("div",{style:"display:none"});Ys(e,new Pf(4,0,0,0));e.xl=new Pf(4,0,0,0)||k;e.tt=150;e.Cr=100;e.Sg(g);e.className="hc-lang-select";O(e,"beforeshow",function(b){d=b.target.anchor;e.Vc(new $n(d,1));if(d.lang){var b=h,c,g=d.lang;(c=(c=z.find(xF,function(b){return b[0]===g||z.contains(b[1],g)}))&&yF(c))&&b.za(c.value);h.ci(j)}else h.Wj("选择语言")});O(e,"beforehide",function(b){d=k;h.za(k);if((b=b.target)&&c.contains(b)&&EF(b))return m});
var h=new wF;h.W(g);O(h,"change",function(b){d&&(d.lang=b.DQ.value,e.D(m))});this.Mp={ow:lf(e),bX:lf(h),G:function(){e.G();h.G()}};Rc(b,this.Mp);O(b,"delayedchange",this.AR,m,this);O(b.field,"paste",this.Nw,m,this)};t.AR=function(){var b=this.Mp&&this.Mp.ow();b&&(b.R()&&b.anchor)&&b.ha()};
t.Nw=function(b){var c=GF(this),d=c.vo,e=c.code;if("1"===c.state)if(c=b.Tb.clipboardData)c.types&&z.contains(c.types,"text/plain")&&(b.preventDefault(),c=c.getData("text/plain"),b=document.createTextNode(c),d.Wf(b),Xs(b));else if(window.clipboardData){if(c=window.clipboardData.getData("Text")){b.preventDefault();var g=c;this.Ii("i",function(b,c){d.Wf(b);b=c();g=Ka(g);mc(document.createTextNode(g),b)})}}else{var h=d.sa(),b=d.Gc().length,l=(e.firstChild?Qs(e.firstChild):0)-h-b;setTimeout(function(){var b=
FF(e.innerHTML);xc(e,b);b=(e.firstChild?Qs(e.firstChild):0)-l;e.firstChild&&Tq(e.firstChild,Math.max(h,b)).select()})}};
t.Lw=function(b){if(13===b.keyCode)return this.Fw(b);if(40===b.keyCode){var c=GF(this),d=c.vo,b=c.code;if("1"===c.state){for(var e=c=d.fa(),g=[];e&&e!==b;)g.push([e.parentNode.childNodes.length,z.indexOf(e.parentNode.childNodes,e)]),e=e.parentNode;g=!g.length||z.every(g,function(b){return b[0]===b[1]+1});e=DF(c);if(g&&!(g=!e))e&&(c=c.nodeValue,d=d.Ha(),e=d===c.length||BF&&d===c.length-1&&"\n"===c.slice(-1)),g=e;g&&(kD(b)||kc(document.createElement("br"),b))}}};
t.Fw=function(b){var c=GF(this),d=c.vo;if("1"===c.state)return b.preventDefault(),A?this.Ii("i",function(b,c){d.Wf(b);setTimeout(function(){var d=document.createTextNode("\r");b=c();mc(d,b);Xs(d)})}):document.queryCommandSupported("insertLineBreak")?document.execCommand("insertLineBreak"):(b=document.createTextNode("\n"),d.insertNode(b),Xs(b)),this.C.Re(),j};
t.Tr=function(b,c){var d=this.F,e;b.Sc();var g;var h=VC(b,j),l=h.ba,n,q=this.C.field;g=HF(this,l,mD(jD,rf(CF)))||q;var r=function(b){return b.parentNode.insertBefore(document.createTextNode(""),b)};if(DF(l)){var w=l.parentNode;!l.nodeValue&&w!==q&&At(w)?(n=r(w),l=r(n),w.parentNode.removeChild(w)):n=A&&h.offset===l.length?kc(document.createTextNode(""),l):l.splitText(h.offset)}else"BR"===l.tagName&&(n=l,l=r(l));if(n){for(var F,h=l,l=n;h!=g&&(F=h.parentNode);){n=h;h=l;for(l=F.cloneNode(m);n.nextSibling;)l.appendChild(n.nextSibling);
h&&l.insertBefore(h,l.firstChild);h=F}F=l;n=F.firstChild;hc(g,F.childNodes);g=n}else g=k;g?(e=document.createElement("PRE"),g.parentNode.insertBefore(e,g)):this.Ii("PRE",function(c,d){b.insertNode(c);e=d()});!c&&A&&(c=" ");e.lang=d.UK;xc(e,c);At(e)?zt(e.firstChild):Xs(e.lastChild);d=e;kD(d)||kc(document.createElement("br"),d)};MA["+code"]={bb:j,Q:"插入代码",va:"+code",La:"tr-icon tr-code",factory:Nz};a.IF=function(){Cv.call(this);this.BQ=k};y(IF,Cv);a.JF=/^(DIV|TR|LI|BLOCKQUOTE|H\d|PRE|XMP)/,a.KF=function(b){b.push("<br>")};t=IF.prototype;t.ed=s("RemoveFormatting");t.we=function(b){return"+removeFormat"==b};t.Ve=function(b){"+removeFormat"==b&&!ew(this.C).isCollapsed()&&(b=this.BQ||v(this.FG,this),LF(this,b),QC(this).Ba().execCommand("RemoveFormat",m,i),ir&&LF(this,function(b){var d=D("528")?/&nbsp;/g:/\u00A0/g;return b.replace(d," ")}))};
t.tr=function(b,c,d){return!d?m:" "==c?(this.C.execCommand("+removeFormat"),j):m};
a.MF=function(b,c){for(var d=b.C.m();c&&c!=d;){if("TABLE"==c.tagName)return c;c=c.parentNode}return k},a.LF=function(b,c){var d=ew(b.C);if(!(1<d.bj())){if(B){var e=hD(d,b.C.m()),g=MF(b,e.U()),h=MF(b,e.fa());if(g||h){if(g==h)return;var l,n=d;l=g;var d=h,e=new bD(n),q=n.U(),r=n.sa(),w=n.fa(),n=n.Ha(),F=QC(b);if(l){var I=F.createTextNode("");kc(I,l);q=I;r=0}d&&(I=F.createTextNode(""),jc(I,d),w=I,n=0);Dq(q,r,w,n).select();l=e;g||(d=M(OC(l,j)),b.Lz=d);h||(d=M(OC(l,m)),b.Hv=d);d=ew(b.C);e=hD(d,b.C.m())}e.select();
d=e}q=d;d=QC(b).v("div");e=q.Kd();Xq?d.appendChild(e.cloneContents()):Wq&&(r=q.Gc(),r=r.replace(/\r\n/g,"\r"),w=r.length,q=w-r.replace(/^[\s\xa0]+/,"").length,r=w-Oa(r).length,e.moveStart("character",q),e.moveEnd("character",-r),q=e.htmlText,"Formatted"==e.queryCommandValue("formatBlock")&&(q=Pa(e.htmlText)),d.innerHTML=q);q=c(d.innerHTML);F=ew(b.C);d=QC(b);r=db();e=db();q='<span id="'+r+'"></span>'+q+'<span id="'+e+'"></span>';n=db();w='<span id="'+n+'"></span>';if(Wq){I=F.oe(0).Kd();I.pasteHTML(w);
for(var G;(G=I.parentElement())&&At(G)&&!aD(G);){F=G.nodeName;if("TD"==F||"TR"==F||"TH"==F)break;M(G)}I.pasteHTML(q);(n=d.m(n))&&M(n)}else if(Xq){d.Ba().execCommand("insertImage",m,n);F=RegExp("<[^<]*"+n+"[^>]*>");G=ew(b.C).Bb();3==G.nodeType&&(G=G.parentNode);for(;!F.test(G.innerHTML);)G=G.parentNode;if(B)G.innerHTML=G.innerHTML.replace(F,q);else{G.innerHTML=G.innerHTML.replace(F,w);for(G=n=d.m(n);(G=n.parentNode)&&At(G)&&!aD(G);){F=G.nodeName;if("TD"==F||"TR"==F||"TH"==F)break;kc(n,G);M(G)}G.innerHTML=
G.innerHTML.replace(RegExp(w,"i"),q)}}G=d.m(r);d=d.m(e);Dq(G,0,d,d.childNodes.length).select();M(G);M(d);B&&l&&(d=ew(b.C),G=b.C.m(),b.Lz&&(G.insertBefore(b.Lz,G.firstChild),b.Lz=k),b.Hv&&(G.appendChild(b.Hv),b.Hv=k),G=k,e=OC(l,j),q=OC(l,m),e&&q&&(G=Dq(e,0,q,0)),SC((g?G:d).U(),(g?G:d).sa(),(h?G:d).fa(),(h?G:d).Ha()).select(),l.G())}};
t.FG=function(b){var c=document.createElement("div");c.innerHTML=b;for(var b=[],c=[c.childNodes,0],d=[],e=0,g=[],h=0,l=0;0<=l;l-=2){for(var n=m;0<h&&l<=g[h-1];)h--,n=j;n&&KF(b);for(n=m;0<e&&l<=d[e-1];)e--,n=j;n&&KF(b);for(var n=c[l],q=c[l+1];q<n.length;){var r=n[q++],w=r.nodeName,F=this.sD(r);if(F!=k)b.push(F);else{switch(w){case "#text":r=0<e?r.nodeValue:Ia(r.nodeValue);r=Wa(r);b.push(r);continue;case "P":KF(b);KF(b);break;case "BR":KF(b);continue;case "TABLE":KF(b);g[h++]=l;break;case "PRE":case "XMP":d[e++]=
l;break;case "STYLE":case "SCRIPT":case "SELECT":continue;case "A":if(r.href&&""!=r.href){b.push("<a href='");b.push(r.href);b.push("'>");b.push(this.FG(r.innerHTML));b.push("</a>");continue}else break;case "IMG":b.push("<img src='");b.push(r.src);b.push("'");"0"==r.border&&b.push(" border='0'");b.push(">");continue;case "TD":r.previousSibling&&b.push(" ");break;case "TR":r.previousSibling&&KF(b);break;case "DIV":if(F=r.parentNode,F.firstChild==r&&JF.test(F.tagName))break;default:JF.test(w)&&KF(b)}r=
r.childNodes;0<r.length&&(c[l++]=n,c[l++]=q,n=r,q=0)}}}return b.join("").replace(/\xa0|[ \t]+/g," ")};t.sD=s(k);a.NF=function(){IF.call(this)};y(NF,IF);NF.prototype.sD=function(b){var c;if("IMG"!==b.nodeName)return k;c=[];c.push('<img src="');c.push(Wa(b.src));c.push('"');b.getAttribute("eeimg")&&b.getAttribute("alt")&&c.push(' eeimg="'+Wa(b.getAttribute("eeimg"))+'" alt="'+Wa(b.getAttribute("alt"))+'"');c.push(">");return c.join("")};a.OF=function(b){eE.call(this,b);this.N=new le(this);this.nA="http://upload."+dh.$l+":"+location.port+"/upload";this.aK=!A};y(OF,eE);a.PF=function(b){gd.call(this,"ok");var c=b[0];this.yl=c;this.fG=c.replace("_m.jpg","_r.jpg");this.zG=b[1];this.yG=b[2]};y(PF,gd);t=OF.prototype;t.template=Qk('<div class="zm-img-uploader"><iframe src="about:blank" name="av_up_frame" style="position: absolute; height: 0; width: 0; left: -9000px; "></iframe><div class="zg-section zm-img-uploader-tab"><a href="javascript:;" class="tab-nav selected">上传图片</a> 或 <a href="javascript:;" class="tab-nav">引用站外图片</a></div><form class="zg-clear" target="av_up_frame" method="POST" enctype="multipart/form-data" action="<%= uploadURL %>"><div class="tab-content selected <% if (canStylize) { %>inline<% } %>"><% if (canStylize) { %><input type="file" name="upload_file" style="opacity:0;height:0;width:0;font-size:0;position:absolute;"><a href="javascript:;" class="browser zg-btn-blue">选择图片</a><% } else { %><input type="file" name="upload_file"><% } %></div><div class="tab-content"><input type="text" autocomplete="off" name="upload_file_url" class="zm-editable-editor-input zg-form-text-input"><a href="javascript:;" class="insert zg-btn-blue zm-uploader-button-fix">确认</a></div><span style="display: none; " class="zm-img-uploader-loading">正在上传</span><span style="display: none; " class="zm-img-uploader-error">上传图片失败，请稍后重试</span></form><div class="zg-gray">请不要上传与回答问题无关的图片，详细请看 <a href="http://www.zhihu.com/question/20064580" target="_blank">知乎图片使用规范</a></div><div class="zm-command"><a class="cancel" href="javascript:;">取消</a></div></div>');
t.hv=function(){var b=fc(this.template({uploadURL:this.nA,canStylize:this.aK}));H.forEach({form:"form",Tz:".zm-img-uploader-tab",Nh:".zm-img-uploader-loading",Cf:".zm-img-uploader-error",yH:"input[type=text]",ln:"input[type=file]",zB:".browser",Su:".cancel",YN:".insert"},function(c,e){this[e]=$(c,b).get(0)},this);this.N.e(Y,Wl,this.tu).e(this.ln,"change",this.VQ).e(this.YN,"click",this.ZN).e(this.Su,"click",function(){this.zw();this.hide()}).e(this.Tz,"click",function(b){b=$(b.target);b.is("a")&&
!b.is(".selected")&&QF(this,b.index())});this.UB=b;Ug||(QF(this,1),$(this.Tz).replaceWith("<strong>输入站外图片地址：</strong>"));this.zB&&this.N.e(this.zB,"click",function(){this.ln.click()});var c=new fE(this);c.Ma("插入图片").Ea(this.UB);c=iE(c);hi(c,k);return c};t.VQ=function(){if(this.ln.value){var b=this.ln.value,b=String(b).toLowerCase();(!b?0:z.some([".jpg",".jpeg",".gif",".png"],function(c){return Fa(b,c)}))?(this.yH.value="",RF(this)):SF(this,"图片不是 .jpg、.png 或 .gif 格式，无法上传。")}};
t.ZN=function(){var b=Ak(this.yH.value);b?Ea(b,"http://")?(this.ln.value="",RF(this)):SF(this,"我们目前不支持该协议。"):SF(this,"请填写图片地址。")};a.QF=function(b,c){function d(b){b.eq(c).addClass("selected").siblings().removeClass("selected")}var e=$(".tab-nav",b.Tz),g=$(".tab-content",b.form);R(b.Cf,m);var h=g.eq(c);h.find("input").val("");d(e);d(g);h.find(":text").focus()},a.SF=function(b,c){R(b.Nh,m);b.Cf.innerHTML=c;R(b.Cf,j)};t.tu=function(b){R(this.Nh,m);this.Xj(b.tc)};
t.Xj=function(b){b&&!b.r?(this.dispatchEvent(this.Xm(b.msg)),this.hide()):SF(this,b.msg)};a.RF=function(b){R(b.Nh,j);R(b.Cf,m);b.form.submit()};t.Xm=function(b){return new PF(b)};t.w=function(){this.N.G();this.N=k;OF.n.w.call(this)};a.TF=function(){jE.call(this,"image");this.N=new le(this)};y(TF,jE);t=TF.prototype;t.ed=lf("ImageDialogPlugin");t.Ve=function(b,c){var d=this.C;return!d.bf&&(d.Hf(),!d.bf)?m:TF.n.Ve.call(this,b,c)};
t.gj=function(b){if(b&&"mouseup"===b.type){var c=b.target;c&&"IMG"===c.nodeName&&(b=kD(c),b||(b=document.createElement("br"),kc(b,c)),zt(b))}};t.tn=function(b){TF.n.tn.call(this,b)};t.gv=function(b){b=new OF(b);this.N.e(b,"ok",this.xn).e(b,"cancel",this.Aw);return b};t.w=function(){TF.n.w.call(this);this.N.G()};
t.xn=function(b){lE(this);var c=QC(this),d;d=b.fG?c.v("IMG",{"class":"origin_image zh-lightbox-thumb","data-original":b.fG,title:"点击查看原图",src:b.yl}):c.v("IMG",{"class":"content_image",src:b.yl});b.zG&&d.setAttribute("data-rawwidth",b.zG);b.yG&&d.setAttribute("data-rawheight",b.yG);b=ew(this.C);if(gD(b))b.Wf(d),A||(Xs(d,m),c.Oa().focus()),Gv(this.C),this.C.Re();else return k;this.N.removeAll()};t.Aw=function(){this.N.removeAll()};a.UF=function(b){eE.call(this,b);this.N=new le(this)};y(UF,eE);a.VF=function(b,c,d,e,g){gd.call(this,"ok");this.zT=b;this.xT=c;this.yT=g;this.wS=d;this.poster=e};y(VF,gd);t=UF.prototype;t.show=function(){UF.n.show.call(this);this.Rt.focus()};t.hide=function(){UF.n.hide.call(this)};
t.hv=function(){var b="http://upload."+dh.$l+":"+location.port+"/upload_video",b=this.ad.v("div","zm-img-uploader zm-img-uploader-upload-tab-selected",[this.ad.v("div","zg-section",this.ad.v("strong",k,"输入视频页地址：")),this.TX=this.ad.v("iframe",{id:"video_up_frame",src:"about:_blank",name:"video_up_frame",style:"visible:hidden;position:absolute;height:0;width:0;left:-9000px"}),this.bD=this.ad.v("form",{"class":"zg-section-title",target:"video_up_frame",method:"post",enctype:"multipart/form-data",action:b},
[this.Rt=this.ad.v("input",{type:"text","class":"zg-form-text-input",name:"upload_file_url",autocomplete:"off"}),this.Jk=this.ad.v("a",{"class":"zg-btn-blue zm-uploader-button-fix",name:"save",href:"javascript:;"},"确定"),this.ad.v("div","zm-video-uploader-info",[this.Nh=this.ad.v("span",{style:"display:none","class":"zm-img-uploader-loading"},"正在上传"),this.Cf=this.ad.v("span",{style:"display:none","class":"zm-img-uploader-error"},"插入视频失败，请稍后重试")])]),this.KN=this.ad.v("div","zg-gray"),this.Gi=this.ad.v("div",
"zm-command",[this.Su=this.ad.v("a",{href:"javascript:;"},"取消")])]);this.KN.innerHTML='我们目前支持<a class="zg-link-gray" target="_blank" href="http://youku.com">优酷</a>、<a class="zg-link-gray" target="_blank" href="http://tudou.com">土豆</a>、<a href="http://video.sina.com.cn/" class="zg-link-gray" target="_blank">新浪</a>、<a href="http://v.qq.com/" class="zg-link-gray" target="_blank">腾讯</a>、<a href="http://www.56.com/" class="zg-link-gray" target="_blank">56</a>、<a href="http://tv.sohu.com/" class="zg-link-gray" target="_blank">搜狐</a>、<a href="http://www.iqiyi.com/" class="zg-link-gray" target="_blank">爱奇艺</a>视频服务。<br />请不要上传与回答问题无关的视频，详细请看 <a href="http://www.zhihu.com/question/20118966" target="_blank">知乎视频使用规范</a>';
this.N.e(this.Su,"click",function(){this.zw();this.hide()}).e(this.Jk,"click",this.qG).e(this.Gi,"click",this.ra).e(this.bD,"submit",function(){return WF(this,this.Rt.value)}).e(Y,Wl,this.tu);this.UB=b;var c=new fE(this);c.Ma("插入视频").Ea(b);b=iE(c);hi(b,k);return b};a.WF=function(b,c){c=Ak(c);if(!c)return m;var d=c.match(/[\-a-zA-Z0-9@:%_\+.~#?&\/\/=]{2,256}\.[a-z]{2,4}\b(\/[\-a-zA-Z0-9@:%_\+.~#?&\/\/=]*)?/gi);d||(R(b.Nh,m),b.Cf.innerHTML="我们无法识别你输入的视频页地址",R(b.Cf,j));return d};
t.qG=function(){if(this.Rt.value){var b=Ak(this.Rt.value);b&&WF(this,b)&&(R(this.Nh,j),R(this.Cf,m),this.bD.submit())}};t.ra=function(b){"save"===(b.target&&b.target.name)&&this.qG()};t.tu=function(b){R(this.Nh,m);this.Xj(b.tc)};t.Xj=function(b){b&&!b.r?(this.dispatchEvent(this.Xm(b.msg[0],b.msg[1],b.msg[2],b.msg[3],b.msg[4])),this.hide()):(b=b.msg,R(this.Nh,m),this.Cf.innerHTML=b,R(this.Cf,j))};t.Xm=function(b,c,d,e,g){return new VF(b,c,d,e,g)};t.w=function(){this.N.G();this.N=k;UF.n.w.call(this)};
a.XF=function(){jE.call(this,fD);this.N=new le(this)};y(XF,jE);t=XF.prototype;t.ed=lf("VideoDialogPlugin");t.Ve=function(b,c){var d=this.C;return!d.bf&&(d.Hf(),!d.bf)?m:XF.n.Ve.call(this,b,c)};t.tn=function(b){XF.n.tn.call(this,b)};t.gv=function(b){b=new UF(b);this.N.e(b,"ok",this.xn).e(b,"cancel",this.Aw);return b};t.w=function(){XF.n.w.call(this);this.N.G()};
t.xn=function(b){lE(this);var c=QC(this),d=c.v("embed");H.forEach({type:"application/x-shockwave-flash",allowscriptaccess:"always",allowfullscreen:"true",wmode:"opaque","class":"video",width:"420",height:"350",src:b.zT,"data-poster":b.poster,"data-name":b.yT,"data-videoid":b.xT,"data-sourceurl":b.wS},function(b,c){d.setAttribute(c,b)});b=Us(d);Fa(b,'">')&&(b+="</embed>");var b=fc(b+" "),e=b.firstChild,g=ew(this.C);if(gD(g))g.Wf(b),A?document.selection&&(c=document.selection.createRange(),c.move("character",
-1),c.select()):(Xs(e),c.Oa().focus()),Gv(this.C),this.C.Re();else return k;this.N.removeAll()};t.Aw=function(){this.N.removeAll()};a.Bt=j,a.YF=Cv.prototype.execCommand;Cv.prototype.execCommand=function(b){var c=this.C;return H.contains(qD,b)&&!c.bf?(c.Hf(),m):YF.apply(this,arguments)};a.ZF=jE.prototype.execCommand,a.$F=["+equation"];jE.prototype.execCommand=function(b){var c=this.C;return z.contains($F,b)&&!c.bf&&(c.Hf(),!c.bf)?m:ZF.apply(this,arguments)};fD="video";lD=kb?"⌘":"ctrl";MA[fD]={va:fD,Q:"插入视频",La:"tr-icon tr-video",factory:Mz};MA["+equation"]={va:"+equation",Q:Sz.aV,La:"tr-icon tr-equation",factory:Mz};
MA["+bold"].Q="粗体 ("+lD+"+b)";MA["+italic"].Q="斜体 ("+lD+"+i)";MA["+underline"].Q="下划线 ("+lD+"+u)";MA["+superscript"].Q="引用内容";MA["+insertOrderedList"].Q="有序列表";MA["+insertUnorderedList"].Q="无序列表";MA["+removeFormat"].Q="清除格式";MA.image.Q="插入图片";MA[fD].Q="插入视频";MA["+equation"].Q="插入公式";a.aG=function(){};ia(aG);
aG.prototype.rg=function(b,c){this.config=c;var d,e,g;e=K("zm-editable-toolbar-container",b);d=K("zm-editable-editor-outer",b);g=K("zm-editable-editor-field-element",b);var h=new kw(g.id);h.TJ=89;var l=[];c.enableFullScreen&&l.push("toggleFullScreen");l.push("+bold","+italic","+underline",new JE,"+blockquote","+code","+insertOrderedList","+insertUnorderedList","+equation");c.canUploadMedia_&&l.push(new JE,"image",fD);c.useRemoveFormat_&&l.push(new JE,"+removeFormat");var n=Sb(e);g=[];for(var q=0,
r;r=l[q];q++){if(oa(r)){var w=i;if(r=MA[r]){var w=r.factory||Nz,F=r.va,I=r.Q,G=r.caption,Q=r.La,W=n||Sb(),w=w(F,I,G,Q,k,W);r.bb&&(w.bb=j)}r=w}r&&g.push(r)}var l=Sb(e),ja=new $C(Py.O(),Ip,l),l=fg(e);ja.fi(l);ja.Fe(m);for(n=0;q=g[n];n++)lp(q,32,m),q.fi(l),ja.H(q,j);ja.W(e);new LE(h,ja);Rc(h,ja);PC(h,new pD);PC(h,new yE);if(c.loremIpsum_&&(PC(h,new zE(c.loremIpsum_)),B))h.on("load",function(){wd(h.m(),"focus",function(){h.execCommand("clearlorem",j)})});PC(h,new JD);PC(h,new NF);PC(h,new DE);e=new AF;
PC(h,e);PC(h,new TF);PC(h,new XF);PC(h,new jF);PC(h,new fF);PC(h,new gF);PC(h,new tF);c.enableFullScreen&&(d=new QA({title:"写作模式",gk:d}),PC(h,d));h.on("load",function(){c.useScraper_&&this.Sr(h,ja)},m,this);return[h,ja]};aG.prototype.Sr=function(b,c){var d=b.m(),e=new yw;e.o(d);var g=L("div",{style:"display:none",className:"tr-spinner spinner-gray"});c.m().appendChild(g);e.on("willScrape",function(){R(g,j)}).on("didScrape",function(){R(g,m)});Rc(b,e)};
Ca("ZH.createRichTextEditor",function(b,c){return aG.O().rg(b,c)});Jf("rich_text_editor");}})(zhihu);
//@ sourceURL=http://static.zhihu.com/static/compiled/rich_text_editor.js