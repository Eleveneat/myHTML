(function(a){with(a){
a.Os=function(){T.call(this)};y(Os,T);Os.prototype.z=function(){this.o(document.body)};
Os.prototype.B=function(b){function c(b,c,d){if(F){var e=function(){c.css("display","none");b.css("display","block");var e=G;en(e);fn(e,d)};c.show().fadeOut(150,function(){b.css({opacity:0.5,right:-20,position:"relative",display:"block"}).animate({opacity:1,right:0},150,e)})}else{F=j;b.show();var g=G;en(g);fn(g,d)}}function d(){r.hide();w.show()}function e(){$(this).trigger("requestStory")}function g(){var b=n.filter(".current");b.length&&l.css("top",b.position().top+b.height()/2-10)}Os.n.B.call(this,
b);var h={member:Uj(function(b){return $.get("/node/HomeHeroStoryV2",{params:{member_hash:b}})}),topic:Uj(function(b){return $.get("/node/HomeTopicStoryV2",{params:{url_token:b}})})},l=$("div.single-story > .icon-sign").addClass("visible"),n=$("a.rep"),q=k;n.mouseenter(function(){q=setTimeout(v(e,this),500)}).mouseleave(function(){clearTimeout(q)}).click(e).on("requestStory",function(){var b=$(this),c=b.data(),d=c.type,c=c.token;b.addClass("current").siblings().removeClass("current");g();h[d](c).done(function(c){$(".single-story-inner").fadeOut(150,
function(){$(this).remove();$(c).insertAfter(l).hide().fadeIn(150)});b.trigger("afterRequestStory")})});g();var r=$("div.mobi-front"),w=$("div.desk-front");r.find(".js-signin, .js-signup").click(function(){w.find(".js-title-label").text("返回");w.find(".return").off().click(function(){window.location.hash=""});d()});this.h().e(window,"hashchange",function(){var b=window.location.hash.slice(1);"signin"===b?(d(),G.Ez()):"signup"===b?(d(),G.vt()):(w.css("display",""),r.css("display",""))});this.h().e(Y,
["accountcallback","sina_callback","qqconn_callback"],d);var F=m,b=window.location.hash.slice(1),I="signin"===b||"signup"!==b&&$("div.view-signin").hasClass("selected"),G=new cn({Cv:function(b,d){"signin"===b?c(dn(G,"signin"),dn(G,"signup"),b):"signup"===b?c(dn(G,"signup"),dn(G,"signin"),b):G.defaults.Cv.call(G,b,d)}});("signin"===b||"signup"===b)&&d();G.Lf=j;G.Qk=I?"signin":"signup";G.o(J("js-sign-flow"));this.Gn();if(!sb){var b=$("div.single-story"),Q=$("div.rep"),W=k,ja=function(){var b=Q.filter(":not(.current)").get();
z.sS(b);return b[0]},I=function(){W||(W=setInterval(function(){$(ja()).trigger("requestStory")},5E3))},Ja=function(){clearInterval(W);W=k};b.hover(Ja,I);Q.on("requestStory",Ja).on("afterRequestStory",I);b={start:I,stop:Ja};b.start();b=b.stop;this.no||(this.no=[]);this.no.push(v(b,i))}};
Os.prototype.Gn=function(){$.each({".app-link.ios":["click_zhihu_ios_dl_link","homepage_not_logged_in"],".app-link.android":["click_zhihu_android_dl_link","homepage_not_logged_in"],'a.app-download-button[href^="http://itunes"]':["click_zhihu_ios_dl_link","homepage_mobile_big_not_logged_in"],'a.app-download-button[href^="https://play.google.com"]':["click_zhihu_android_dl_link","homepage_mobile_big_not_logged_in"]},function(b,c){$(b).on("click",function(){X.apply(k,["app-promotion"].concat(c))})})};
Ca("ZH.entrySignPage",function(){(new Os).z()});Jf("sign");}})(zhihu);
//@ sourceURL=http://static.zhihu.com/static/compiled/sign.js